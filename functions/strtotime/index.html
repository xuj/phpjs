
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript strtotime function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript strtotime function A JavaScript equivalent of PHP&#8217;s strtotime datetime/strtotime.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12
13
14 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/strtotime/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <a target="_blank" href="https://github.com/kvz/phpjs">
    <img id="fork-us" style="position: fixed; z-index: 99; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>
  <header role="banner"><hgroup>
  <div id="logo">
    <h1><a href="/">php.js</a></h1>
  	<div class="clear"></div>
  </div>

  
  
    <h2>Learn how to do it in JavaScript. Explore boundaries porting languages. Use functions that turn out to be useful.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
  <li><a target="_blank" href="https://github.com/kvz/phpjs/wiki/_pages">Wiki</a></li>
  <li><a target="_blank"  href="http://twitter.com/phpjs">@phpjs</a></li>
  <li><a target="_blank"  href="http://identi.ca/brettz9">@brettz9</a></li>
  <li><a target="_blank"  href="http://twitter.com/kvz">@kvz</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript strtotime function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s strtotime</p>

<figure class='code'><figcaption><span>datetime/strtotime.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/datetime/strtotime.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">strtotime</span> <span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">now</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Convert string representation of date and time to a timestamp</span>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// version: 1109.2015</span>
</span><span class='line'>  <span class="c1">// discuss at: http://phpjs.org/functions/strtotime</span>
</span><span class='line'>  <span class="c1">// +   original by: Caio Ariede (http://caioariede.com)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +      input by: David</span>
</span><span class='line'>  <span class="c1">// +   improved by: Caio Ariede (http://caioariede.com)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Wagner B. Soares</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Artur Tchernychev</span>
</span><span class='line'>  <span class="c1">// +   improved by: A. Mat√≠as Quezada (http://amatiasq.com)</span>
</span><span class='line'>  <span class="c1">// %        note 1: Examples all have a fixed timestamp to prevent tests to fail because of variable time(zones)</span>
</span><span class='line'>  <span class="c1">// *     example 1: strtotime(&#39;+1 day&#39;, 1129633200);</span>
</span><span class='line'>  <span class="c1">// *     returns 1: 1129719600</span>
</span><span class='line'>  <span class="c1">// *     example 2: strtotime(&#39;+1 week 2 days 4 hours 2 seconds&#39;, 1129633200);</span>
</span><span class='line'>  <span class="c1">// *     returns 2: 1130425202</span>
</span><span class='line'>  <span class="c1">// *     example 3: strtotime(&#39;last month&#39;, 1129633200);</span>
</span><span class='line'>  <span class="c1">// *     returns 3: 1127041200</span>
</span><span class='line'>  <span class="c1">// *     example 4: strtotime(&#39;2009-05-04 08:30:00&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 4: 1241418600</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">text</span><span class="p">)</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Unecessary spaces</span>
</span><span class='line'>  <span class="nx">text</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s{2,}/g</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/[\t\r\n]/g</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">parsed</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">text</span> <span class="o">===</span> <span class="s1">&#39;now&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">now</span> <span class="o">===</span> <span class="kc">null</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">now</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">|</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">now</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">parse</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">text</span><span class="p">)))</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">parse</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">text</span> <span class="o">===</span> <span class="s1">&#39;now&#39;</span><span class="p">)</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span> <span class="c1">// Return seconds, not milli-seconds</span>
</span><span class='line'>  <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">parsed</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">text</span><span class="p">)))</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">parsed</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^(\d{2,4})-(\d{2})-(\d{2})(?:\s(\d{1,2}):(\d{2})(?::\d{2})?)?(?:\.(\d+)?)?$/</span><span class="p">);</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">match</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">69</span> <span class="o">?</span> <span class="o">+</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2000</span> <span class="o">:</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">year</span><span class="p">,</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
</span><span class='line'>          <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">match</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">match</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">now</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">now</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">days</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="s1">&#39;sun&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;mon&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;tue&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;wed&#39;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;thu&#39;</span><span class="o">:</span> <span class="mi">4</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;fri&#39;</span><span class="o">:</span> <span class="mi">5</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;sat&#39;</span><span class="o">:</span> <span class="mi">6</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">ranges</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>      <span class="s1">&#39;yea&#39;</span><span class="o">:</span> <span class="s1">&#39;FullYear&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;mon&#39;</span><span class="o">:</span> <span class="s1">&#39;Month&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;day&#39;</span><span class="o">:</span> <span class="s1">&#39;Date&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;hou&#39;</span><span class="o">:</span> <span class="s1">&#39;Hours&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;min&#39;</span><span class="o">:</span> <span class="s1">&#39;Minutes&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="s1">&#39;sec&#39;</span><span class="o">:</span> <span class="s1">&#39;Seconds&#39;</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">lastNext</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">modifier</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">days</span><span class="p">[</span><span class="nx">range</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">day</span><span class="p">)</span> <span class="o">!==</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="kd">var</span> <span class="nx">diff</span> <span class="o">=</span> <span class="nx">day</span> <span class="o">-</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">diff</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span>
</span><span class='line'>              <span class="nx">diff</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="nx">modifier</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">diff</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;last&#39;</span><span class="p">)</span>
</span><span class='line'>              <span class="nx">diff</span> <span class="o">-=</span> <span class="mi">7</span><span class="p">;</span>
</span><span class='line'>          <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">diff</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;next&#39;</span><span class="p">)</span>
</span><span class='line'>              <span class="nx">diff</span> <span class="o">+=</span> <span class="mi">7</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>          <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="nx">diff</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="kd">function</span> <span class="nx">process</span><span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">split</span> <span class="o">=</span> <span class="nx">val</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">split</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="nx">split</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">typeIsNumber</span> <span class="o">=</span> <span class="sr">/\d+/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">ago</span> <span class="o">=</span> <span class="nx">split</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">===</span> <span class="s1">&#39;ago&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">num</span> <span class="o">=</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;last&#39;</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">ago</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">typeIsNumber</span><span class="p">)</span>
</span><span class='line'>          <span class="nx">num</span> <span class="o">*=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">ranges</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">range</span><span class="p">))</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">date</span><span class="p">[</span><span class="s1">&#39;set&#39;</span> <span class="o">+</span> <span class="nx">ranges</span><span class="p">[</span><span class="nx">range</span><span class="p">]](</span><span class="nx">date</span><span class="p">[</span><span class="s1">&#39;get&#39;</span> <span class="o">+</span> <span class="nx">ranges</span><span class="p">[</span><span class="nx">range</span><span class="p">]]()</span> <span class="o">+</span> <span class="nx">num</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">range</span> <span class="o">===</span> <span class="s1">&#39;wee&#39;</span><span class="p">)</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="nx">num</span> <span class="o">*</span> <span class="mi">7</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;next&#39;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">===</span> <span class="s1">&#39;last&#39;</span><span class="p">)</span>
</span><span class='line'>          <span class="nx">lastNext</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">num</span><span class="p">);</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">typeIsNumber</span><span class="p">)</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">regex</span> <span class="o">=</span> <span class="s1">&#39;([+-]?\\d+\\s&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="s1">&#39;(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="s1">&#39;|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="s1">&#39;|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="s1">&#39;(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="s1">&#39;|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday&#39;</span> <span class="o">+</span>
</span><span class='line'>      <span class="s1">&#39;|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">match</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">regex</span><span class="p">,</span> <span class="s1">&#39;gi&#39;</span><span class="p">));</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">match</span><span class="p">)</span>
</span><span class='line'>      <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">len</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">len</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">process</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span>
</span><span class='line'>          <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ECMAScript 5 only</span>
</span><span class='line'>  <span class="c1">//if (!match.every(process))</span>
</span><span class='line'>  <span class="c1">// return false;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/datetime/strtotime.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/datetime/strtotime.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">strtotime</span><span class="p">(</span><span class="s1">&#39;+1 day&#39;</span><span class="p">,</span> <span class="mi">1129633200</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="mi">1129719600</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">strtotime</span><span class="p">(</span><span class="s1">&#39;+1 week 2 days 4 hours 2 seconds&#39;</span><span class="p">,</span> <span class="mi">1129633200</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="mi">1130425202</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 3</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">strtotime</span><span class="p">(</span><span class="s1">&#39;last month&#39;</span><span class="p">,</span> <span class="mi">1129633200</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="mi">1127041200</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the datetime extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/checkdate">checkdate</a></li>
<li><a href="/functions/date">date</a></li>
<li><a href="/functions/date_default_timezone_get">date_default_timezone_get</a></li>
<li><a href="/functions/date_default_timezone_set">date_default_timezone_set</a></li>
<li><a href="/functions/date_parse">date_parse</a></li>
<li><a href="/functions/getdate">getdate</a></li>
<li><a href="/functions/gettimeofday">gettimeofday</a></li>
<li><a href="/functions/gmdate">gmdate</a></li>
<li><a href="/functions/gmmktime">gmmktime</a></li>
<li><a href="/functions/gmstrftime">gmstrftime</a></li>
<li><a href="/functions/idate">idate</a></li>
<li><a href="/functions/localtime">localtime</a></li>
<li><a href="/functions/microtime">microtime</a></li>
<li><a href="/functions/mktime">mktime</a></li>
<li><a href="/functions/strftime">strftime</a></li>
<li><a href="/functions/strptime">strptime</a></li>
<li><a href="/functions/strtotime">strtotime</a></li>
<li><a href="/functions/time">time</a></li>
<li><a href="/functions/timezone_abbreviations_list">timezone_abbreviations_list</a></li>
<li><a href="/functions/timezone_identifiers_list">timezone_identifiers_list</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
Matteo
</strong>
on 2012-07-09 17:49:26 <br />
I do not know if this can help, but I noticed this:

date(&#8216;Y-m-d&#8217;, strtotime(&#8216;2012-07-01 +7 DAY&#8217;)) = 2012-07-11 &#8211;&gt; wrong

but

date(&#8216;Y-m-d&#8217;, strtotime(&#8216;+7 DAY&#8217;, strtotime(&#8216;2012-07-01&#8217;))) = 2012-07-08 &#8211;&gt; correct
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-07-05 03:42:23 <br />
@Matteo: Yeah, I see. Based on other comments here as well, this function needs a good amount of work, and I&#8217;m a bit busy to undertake it now. Anyone? Looking at PHP source or http://www.gnu.org/software/tar/manual/html_node/Date-input-formats.html would be ideal to ensure all areas are addressed.
<hr />


<strong>
Matteo
</strong>
on 2012-07-04 16:58:34 <br />
@Brett: I do not think that the timezone can justify a difference of many days!

using php.js: date(&#8216;Y-m-d&#8217;, strtotime(&#8216;2012-07-01 +7 DAY&#8217;)) = 2012-07-11 &#8211;&gt; wrong

using php: date(&#8216;Y-m-d&#8217;, strtotime(&#8216;2012-07-01 +7 DAY&#8217;)) = &#8216;2012-07-08&#8217; &#8211;&gt; correct
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-07-04 14:52:48 <br />
@Tom: Are you using the latest versions of the code? Please visit &quot;raw js source&quot;. I am getting the result you said you were expecting.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-07-04 14:47:12 <br />
@wookie: I made a change; are u using Adobe Air, I think it was which passes around String objects for some reason? 

@Daniele: You can make a &quot;pull request&quot; at Github for us to accept your changes.

Everyone else commenting here: Sorry, moving slowly here.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2012-07-04 02:28:54 <br />
@Matteo: I haven&#8217;t looked at it carefully, but are you controlling for timezone (browser vs. server)?
<hr />


<strong>
Matteo
</strong>
on 2012-07-03 19:15:07 <br />
There is a problem:

using this function:

strtotime(&#8216;2012-07-01 +7 DAY&#8217;) = 1341931365.248

while PHP says:

strtotime(&#8216;2012-07-01 +7 DAY&#8217;) = 1341698400

is it an error on my part or in the function?
<hr />


<strong>
wookie
</strong>
on 2012-06-15 10:25:32 <br />
I was getting an error when I was sending &#8216;2004-02-12T23:00:00.000Z&#8217; to get converted, it complained that it wasn&#8217;t a string.. weird. Anyway my fix was:
<pre><code>
strTmp = str+'';
</code></pre>
<hr />


<strong>
<a href="wardhana.com" rel="nofollow">Denny Wardhana</a>
</strong>
on 2012-03-04 03:30:41 <br />
I&#8217;ve just noticed that this function and also other functions which are using Date.parse return incorrect result in:
- Chrome 4 and older (can be ignored)
- IE8 and older (hardly to be ignored)
- Safari latest version and older (shouldn&#8217;t be ignored)
<hr />


<strong>
Tom
</strong>
on 2011-12-28 06:38:32 <br />
echo(date(&quot;Y-m-d H:i:s&quot;, strtotime(&quot;last monday&quot;, 1325050486)));

gives: 2011-11-28 06:34:46 
expected: 2011-12-26 00:00:00
<hr />


<strong>
<a href="www.plancake.com" rel="nofollow">Daniele</a>
</strong>
on 2011-10-11 10:47:48 <br />
I am using this function on something mission-critical for the user (an online task manager and calendar) so I need it to be flawless.

I am trying to find bugs and fix them myself. If you want to help me, please contact me.

I would also like to contribute to the Github repo with my fixes - how can I do that?

Here is another bug:

date(&quot;Y-m-d&quot;, strtotime(&#8216;+3 days&#8217;));  //  returns 2011-10-14
date(&quot;Y-m-d&quot;, strtotime(&#8216;+3 days&#8217;, 1324815132));  // returns 2011-10-14

I have fixed the bug by replacing line 30 of the version version: 1109.2015 with:
} else if ((!now) &amp;&amp; !isNaN(parse = Date.parse(strTmp))) {

I hope that won&#8217;t introduce new bugs.

Any ideas?
<hr />


<strong>
<a href="http://www.plancake.com" rel="nofollow">Daniele</a>
</strong>
on 2011-10-11 00:20:00 <br />
This function would be so useful if it was reliable

An example:

PHP
date(&quot;Y-m-d&quot;, strtotime(&#8216;second Monday October 2011&#8217;));
returns: 2011-10-10
(which is right)

JS:
date(&quot;Y-m-d&quot;, strtotime(&#8216;second Monday October 2011&#8217;));
returns: 1970-01-01
(which is obviously wrong)

Any solution, suggestion, work around?

Is this function still maintained? If not, maybe I can start working with somebody to maintain it back.
<hr />


<strong>
Brad Ramsey
</strong>
on 2011-10-04 07:10:20 <br />
I don&#8217;t understand why 2011-10-03 is not the same as 10/03/2011&#8230; so I patched the function after line 25:

<pre><code>
match = strTmp.match(/^(\d{4})-(\d{2})-(\d{2})$/);
if (match != null) {
    strTmp = match[2] + '/' + match[3] + '/' + match[1];
}
<pre><code>

Worked for me.
<hr />


<strong>
Romaric
</strong>
on 2011-08-08 14:50:27 <br />
Hi everybody

Nice function, I've used it a lot, but encountered a few issues :
 - it seems unable to decode YYYYMMDD format (not really bad, just use a regex)
 - in French, there are accented chars in month names. But when using short names, it will truncate the html char, i.e. AO&amp; instead of AO&amp;Ucirc;. I came up with this fix, using html_entity_decode (you may want to apply it to week days, too) :
<pre><code>
        M: function () { // Shorthand month name; Jan...Dec
            // Romaric : using html_entity_decode to avoid bugs with accented chars
            var _month = f.F();
            _month = html_entity_decode(_month);
            return _month.slice(0, 3);
        },
</code></pre>
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2011-07-28 20:32:01 <br />
Yeah. Date.parse() is now apparently treating &quot;11&quot; as 1911. And since Date.parse() might vary across browsers, we should I think be using our own implementation anyways rather than allowing for different behavior by browser. Thoughts?
<hr />


<strong>
<a href="http://jasonbutz.info" rel="nofollow">Jason</a>
</strong>
on 2011-07-28 17:37:51 <br />
Try this in Firefox 5:
<pre><code>
console.log(strtotime(&quot;06/28/2011&quot;));
console.log(strtotime(&quot;06/28/11&quot;));
</code></pre>

You get 
<pre><code>
1309237200
-1846522800
</code></pre>

It isn&#8217;t properly detecting 2 digit years.
<hr />


<strong>
<a href="http://zubink.com" rel="nofollow">Zubin Khavarian</a>
</strong>
on 2011-06-24 22:28:45 <br />
There seems to be a bug where different date formats return different values, try:

strtotime(&#8216;2011-06-24&#8217;); //1308873600
strtotime(&#8216;06/24/2011&#8217;); //1308891600

date(&#8216;D M j, Y&#8217;, strtotime(&#8216;2011-06-24&#8217;)); //Thu Jun 23, 2011
date(&#8216;D M j, Y&#8217;, strtotime(&#8216;06/24/2011&#8217;)); //Fri Jun 24, 2011
<hr />


<strong>
<a href="http://scott.connerly.net" rel="nofollow">Scott Connerly</a>
</strong>
on 2010-12-09 01:43:34 <br />
When parsing ISO 8601 dates, PHP&#8217;s strtotime() doesn&#8217;t care if there&#8217;s a colon in the GMT-06:00. php.js&#8217;s version requires the colon to be there. This most notably comes into play with Facebook&#8217;s open social graph dates, it won&#8217;t parse them unless you insert the colon.
<hr />


<strong>
<a href="empatix.no" rel="nofollow">Tommy</a>
</strong>
on 2010-11-10 13:44:41 <br />
hello,
this function doesnt support format like this: 

2010-11-10T13:34:00+01:00
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-08-29 05:58:29 <br />
@Brad: I think it is most likely a timezone issue. Our date function currently does not support the setting of a default timezone (as PHP also allows and recommends), so there may be some problem in setting date values according to the browser locale and then using such values across our functions.

You can see &quot;raw js source&quot;, note #2, on the date function for the latest notes about how this could be implemented if you are able to make the changes to our code yourself (sorry, I have no time at the moment). Anyone else feel free to help out if you can.
<hr />


<strong>
Brad
</strong>
on 2010-08-28 16:25:16 <br />
When I run
<pre><code>
date(&quot;F j, Y&quot;, strtotime(&quot;2010-08-03&quot;));
</code></pre>
I get &quot;August 2, 2010&quot;
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2010-08-17 14:48:50 <br />
test
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-08-16 15:04:07 <br />
@Jack: The syntax highlighting code here is buggy, so when you copy-paste it directly, some lines will be commented out. Go to &quot;raw js source&quot; to make sure you have a good copy&#8230;It is working with the right code&#8230;
<hr />


<strong>
Jack
</strong>
on 2010-08-16 14:34:11 <br />
Example 4 returns NaN. Seems to be broken!
<hr />


<strong>
Mike
</strong>
on 2010-04-02 18:29:06 <br />
hmm - couple of bugs in strtotime&#8230;
1) strtotime(&#8216;last Monday&#8217;,now) returns last month not last monday - first 3 letters of month is the same as monday!
work around :
<pre><code>
strtotime('last Tuesday, -1 day',now);  // = last monday
</code></pre>

2) strtotime(&#8216;d-m-Y&#8217;,now) isn&#8217;t handled correctly (only &#8216;Y-m-d&#8217; is) (as mentioned in other comments)
3) in 2 above, the d and m have to be zero padded to work I.E. strtotime(&#8216;2010-3-1&#8217;) has to be replaced with (&#8216;2010-03-01&#8217;)
work around :
<pre><code>
//examples from variable passed into function perhaps
day = 2;
month = 5;
year = 2010;

if (day &lt; 10) dayzeropad = '0'; else dayzeropad = '';
if (month &lt; 10) monthzeropad = '0'; else monthzeropad = '';
var tstring = year + '-' + monthzeropad + month + '-' + dayzeropad + day;
unixtime = strtotime(tstring);
</code></pre>

bugs work-aroundable&#8230; cool stuff - thanks.
<hr />


<strong>
Zahlii
</strong>
on 2010-03-10 20:31:33 <br />
Is it possible to add support for german-like Dates ?

in PHP (5.3+), strototime(&#8216;22.01.2010&#8217;); works as expected, but not with this js strtotime-method.
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-12-14 15:28:53 <br />
@ rav3n: You might be better off parsing your string first before feeding it to strtotime cause I believe PHP wouldn&#8217;t support your format either.

@ iwosz: Sorry no IE7 on my machine. So unless someone else can get to the bottom of this I may have to see if I can find some WinXP virtual image with IE7 installed or sth like that
<hr />


<strong>
iwosz
</strong>
on 2009-12-09 12:46:54 <br />
Under IE 7 strtotime(&#8216;2009-12-09 12:45:16&#8217;) returns NaN, can you explain that? some solutions? thx.
<hr />


<strong>
rav3n
</strong>
on 2009-12-01 10:34:34 <br />
this function is great. however i need to format the string not as %Y-%m-%d but as %d-%m-%Y.

i understand that it&#8217;s around line 150-170
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-10-09 10:31:28 <br />
@ Daniel Janesch &amp; Theriault: Thanks for pointing out these problems. I&#8217;ve contacted the original author by mail.
<hr />


<strong>
<a href="http://www.fotoeck.at" rel="nofollow">Daniel Janesch</a>
</strong>
on 2009-10-08 22:10:13 <br />
First of all: Great work :-)
I have figured out that the following is not working correctly:
<pre><code>
$d = new Date(2012, 11, 1, 7, 0, 0);
$r = strtotime('3 Wednesday', $d.getTime()/1000); // 2012-11-01 07:00:00
</code></pre>
The correct result with php is 2012-11-21 00:00:00 but with phpjs I get 1351753200 wich is 2012-11-01 07:00:00.
Any clues?
<hr />


<strong>
Theriault
</strong>
on 2009-10-06 00:18:18 <br />
PHP seems to apply the string as a whole and not from left-to-right as in this function. In the following PHP example, both $a and $b will be the same date. If PHP applied them from left-to-right, $b would be 2012-03-01, not 2012-02-29.
<pre><code>
$d = strtotime('2011-02-22');
$a = strtotime('+1 year, +7 days', $d); // 2012-02-29
$b= strtotime('+7 days, +1 year', $d); // 2012-02-29
</code></pre>
This function applies the string from left-to-right, which seems more logical, but is incorrect.
<hr />


<strong>
Theriault
</strong>
on 2009-10-04 02:46:35 <br />
I noticed that none of the following work with this function:

today (same as &#8216;now&#8217; but resets to 12:00:00AM), tomorrow (same as &#8216;+1 day&#8217; but also resets to 12), yesterday (same as &#8216;-1 day&#8217; but also resets to 12).

next week, last week (Currently returns date plus/minus seven days, should return next monday if I remember correctly on how it works in PHP). 

last sunday of next month (returns next month, but not last sun/sat/mon/day&#8230; of that month)

YYYY-Wnn-d (Basically, sets year to YYYY, week number to nn, and then day of that week to d (0-6). Day of week may be omitted and also overflow, such as 7 for next week.)

00:00:00 (Changes time to 12:00:00 AM or anything else entered here.)


Does anyone else see anything missing from this function? I may recode it. I would like to see it complete &#8211; it is a great function.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-08-17 15:39:58 <br />
@majak: Yeah, thanks, it seemed that way from the code snippet (figured out what was the problem by finding that code by Google). Be careful using Prototype or other libraries that overload the prototype objects&#8211;it causes problems like these&#8230;
<hr />


<strong>
majak
</strong>
on 2009-08-17 14:12:36 <br />
@Brett Zamir: Thank you for your help. Your fix works.
Just for reference, I&#8217;m using Prototype framework.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-08-12 14:49:55 <br />
@majak, it appears you are using a library which overloads the Object prototype with its own functions which this PHP.JS function then iterates&#8230; You can solve this problem by adding right after line 184 (see above) the following line (and then the closing brace after line 187):

<pre><code>if (match.hasOwnProperty(i)) {</code></pre>

If you need to work with older browsers like IE 5, you can add this instead:

<pre><code>if (typeof match[i] !== 'function') {</code></pre>

See http://yuiblog.com/blog/2006/09/26/for-in-intrigue/ for a fuller explanation of why.

All of our for&#8230;in statements should really use such a test, though since it is cumbersome, and libraries should, imo, really not be altering the prototype in the first place, I think it is a toss-up as to whether we should add these checks ourselves. What do you think, Kevin?  Perhaps we should in order to be most compatible&#8230;
<hr />


<strong>
majak
</strong>
on 2009-08-12 11:05:40 <br />
I&#8217;m using the latest (2.85) minified and namespaced version of this function. This snippet:
<pre><code>
$P.strtotime('+1 day');
</code></pre>
produces TypeError. I have tested it in both FF and Chrome, here are their error messages:

FF:
TypeError: match[i].split is not a function

Chrome:
TypeError: Object function (inline) {
    return (inline !== false ? this : this.toArray())._reverse();
  } has no method &#8216;split&#8217;

I suppose it happens on every relative date string input, like &quot;-3 months&quot;.
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-06-27 02:16:40 <br />
The function expects a string&#8211;you are mostly passing something to the function which is not a string.
<hr />


<strong>
Andrew
</strong>
on 2009-06-27 01:02:57 <br />
Getting an error &#8211;

<pre><code>Error: strTmp.replace is not a function</code></pre>

The debugger is pointing to this line &#8211; 

<pre><code>strTmp = strTmp.replace(/\s{2,}|^\s|\s$/g, ' '); // unecessary spaces</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-03-22 19:39:13 <br />
@ Jeppe: Well that&#8217;s an issue that should actually have been fixed already. Are you sure you&#8217;re running the latest version? Thanks!
<hr />


<strong>
<a href="http://jeppeb.nl" rel="nofollow">Jeppe</a>
</strong>
on 2009-03-16 20:44:39 <br />
strtotime(&quot;last month&quot;), &quot;-1 month&quot;, &quot;next month&quot;, etc. doesn&#8217;t work. Any ideas?
Thanks!
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-02-25 16:58:14 <br />
@ Dave: I&#8217;ve contacted the original author Caio Ariede, and he&#8217;s been kind enough to fix this function up. All testcases work now!
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/strtotime/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/strtotime/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/strtotime/index.html';
        var disqus_url = 'http://phpjs.org/functions/strtotime/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
