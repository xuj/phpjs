
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript htmlspecialchars function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript htmlspecialchars function A JavaScript equivalent of PHP&#8217;s htmlspecialchars strings/htmlspecialchars.js raw on github 1
2
3
4
5
6
7 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/htmlspecialchars/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <a target="_blank" href="https://github.com/kvz/phpjs">
    <img id="fork-us" style="position: fixed; z-index: 99; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>
  <header role="banner"><hgroup>
  <div id="logo">
    <h1><a href="/">php.js</a></h1>
  	<div class="clear"></div>
  </div>

  
  
    <h2>Learn how to do it in JavaScript. Explore boundaries porting languages. Enjoy functions that turn out to be useful.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript htmlspecialchars function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s htmlspecialchars</p>

<figure class='code'><figcaption><span>strings/htmlspecialchars.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/strings/htmlspecialchars.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">htmlspecialchars</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">quote_style</span><span class="p">,</span> <span class="nx">charset</span><span class="p">,</span> <span class="nx">double_encode</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: Mirek Slugen</span>
</span><span class='line'>  <span class="c1">// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Nathan</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Arno</span>
</span><span class='line'>  <span class="c1">// +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +    bugfixed by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +      input by: Ratheous</span>
</span><span class='line'>  <span class="c1">// +      input by: Mailfaker (http://www.weedem.fr/)</span>
</span><span class='line'>  <span class="c1">// +      reimplemented by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +      input by: felix</span>
</span><span class='line'>  <span class="c1">// +    bugfixed by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// %        note 1: charset argument not supported</span>
</span><span class='line'>  <span class="c1">// *     example 1: htmlspecialchars(&quot;&lt;a href=&#39;test&#39;&gt;Test&lt;/a&gt;&quot;, &#39;ENT_QUOTES&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 1: &#39;&amp;lt;a href=&amp;#039;test&amp;#039;&amp;gt;Test&amp;lt;/a&amp;gt;&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 2: htmlspecialchars(&quot;ab\&quot;c&#39;d&quot;, [&#39;ENT_NOQUOTES&#39;, &#39;ENT_QUOTES&#39;]);</span>
</span><span class='line'>  <span class="c1">// *     returns 2: &#39;ab&quot;c&amp;#039;d&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 3: htmlspecialchars(&quot;my &quot;&amp;entity;&quot; is still here&quot;, null, null, false);</span>
</span><span class='line'>  <span class="c1">// *     returns 3: &#39;my &amp;quot;&amp;entity;&amp;quot; is still here&#39;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">optTemp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">noquotes</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">quote_style</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span> <span class="o">||</span> <span class="nx">quote_style</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">quote_style</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">double_encode</span> <span class="o">!==</span> <span class="kc">false</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Put this first to avoid double-encoding</span>
</span><span class='line'>    <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;amp;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&lt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;lt;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&gt;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;gt;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">OPTS</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;ENT_NOQUOTES&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_HTML_QUOTE_SINGLE&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_HTML_QUOTE_DOUBLE&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_COMPAT&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_QUOTES&#39;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_IGNORE&#39;</span><span class="o">:</span> <span class="mi">4</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">quote_style</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">noquotes</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">quote_style</span> <span class="o">!==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Allow for a single string or an array of string flags</span>
</span><span class='line'>    <span class="nx">quote_style</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">quote_style</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">quote_style</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// Resolve string input to bitwise e.g. &#39;ENT_IGNORE&#39; becomes 4</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">OPTS</span><span class="p">[</span><span class="nx">quote_style</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">noquotes</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">OPTS</span><span class="p">[</span><span class="nx">quote_style</span><span class="p">[</span><span class="nx">i</span><span class="p">]])</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">optTemp</span> <span class="o">=</span> <span class="nx">optTemp</span> <span class="o">|</span> <span class="nx">OPTS</span><span class="p">[</span><span class="nx">quote_style</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">quote_style</span> <span class="o">=</span> <span class="nx">optTemp</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">quote_style</span> <span class="o">&amp;</span> <span class="nx">OPTS</span><span class="p">.</span><span class="nx">ENT_HTML_QUOTE_SINGLE</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&#39;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;#039;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">noquotes</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;quot;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">string</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/strings/htmlspecialchars.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/strings/htmlspecialchars.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">htmlspecialchars</span><span class="p">(</span><span class="s2">&quot;&lt;a href=&#39;test&#39;&gt;Test&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="s1">&#39;ENT_QUOTES&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;&amp;lt;a href=&amp;#039;test&amp;#039;&amp;gt;Test&amp;lt;/a&amp;gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">htmlspecialchars</span><span class="p">(</span><span class="s2">&quot;ab\&quot;c&#39;d&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ENT_NOQUOTES&#39;</span><span class="p">,</span> <span class="s1">&#39;ENT_QUOTES&#39;</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;ab&quot;c&amp;#039;d&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 3</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">htmlspecialchars</span><span class="p">(</span><span class="s2">&quot;my &quot;</span><span class="o">&amp;</span><span class="nx">entity</span><span class="p">;</span><span class="s2">&quot; is still here&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;my &amp;quot;&amp;entity;&amp;quot; is still here&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the strings extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/addcslashes">addcslashes</a></li>
<li><a href="/functions/addslashes">addslashes</a></li>
<li><a href="/functions/bin2hex">bin2hex</a></li>
<li><a href="/functions/chop">chop</a></li>
<li><a href="/functions/chr">chr</a></li>
<li><a href="/functions/chunk_split">chunk_split</a></li>
<li><a href="/functions/convert_cyr_string">convert_cyr_string</a></li>
<li><a href="/functions/convert_uuencode">convert_uuencode</a></li>
<li><a href="/functions/count_chars">count_chars</a></li>
<li><a href="/functions/crc32">crc32</a></li>
<li><a href="/functions/echo">echo</a></li>
<li><a href="/functions/explode">explode</a></li>
<li><a href="/functions/get_html_translation_table">get_html_translation_table</a></li>
<li><a href="/functions/html_entity_decode">html_entity_decode</a></li>
<li><a href="/functions/htmlentities">htmlentities</a></li>
<li><a href="/functions/htmlspecialchars">htmlspecialchars</a></li>
<li><a href="/functions/htmlspecialchars_decode">htmlspecialchars_decode</a></li>
<li><a href="/functions/implode">implode</a></li>
<li><a href="/functions/join">join</a></li>
<li><a href="/functions/lcfirst">lcfirst</a></li>
<li><a href="/functions/levenshtein">levenshtein</a></li>
<li><a href="/functions/localeconv">localeconv</a></li>
<li><a href="/functions/ltrim">ltrim</a></li>
<li><a href="/functions/md5">md5</a></li>
<li><a href="/functions/md5_file">md5_file</a></li>
<li><a href="/functions/metaphone">metaphone</a></li>
<li><a href="/functions/money_format">money_format</a></li>
<li><a href="/functions/nl2br">nl2br</a></li>
<li><a href="/functions/nl_langinfo">nl_langinfo</a></li>
<li><a href="/functions/number_format">number_format</a></li>
<li><a href="/functions/ord">ord</a></li>
<li><a href="/functions/parse_str">parse_str</a></li>
<li><a href="/functions/printf">printf</a></li>
<li><a href="/functions/quoted_printable_decode">quoted_printable_decode</a></li>
<li><a href="/functions/quoted_printable_encode">quoted_printable_encode</a></li>
<li><a href="/functions/quotemeta">quotemeta</a></li>
<li><a href="/functions/rtrim">rtrim</a></li>
<li><a href="/functions/setlocale">setlocale</a></li>
<li><a href="/functions/sha1">sha1</a></li>
<li><a href="/functions/sha1_file">sha1_file</a></li>
<li><a href="/functions/similar_text">similar_text</a></li>
<li><a href="/functions/soundex">soundex</a></li>
<li><a href="/functions/split">split</a></li>
<li><a href="/functions/sprintf">sprintf</a></li>
<li><a href="/functions/sscanf">sscanf</a></li>
<li><a href="/functions/str_getcsv">str_getcsv</a></li>
<li><a href="/functions/str_ireplace">str_ireplace</a></li>
<li><a href="/functions/str_pad">str_pad</a></li>
<li><a href="/functions/str_repeat">str_repeat</a></li>
<li><a href="/functions/str_replace">str_replace</a></li>
<li><a href="/functions/str_rot13">str_rot13</a></li>
<li><a href="/functions/str_shuffle">str_shuffle</a></li>
<li><a href="/functions/str_split">str_split</a></li>
<li><a href="/functions/str_word_count">str_word_count</a></li>
<li><a href="/functions/strcasecmp">strcasecmp</a></li>
<li><a href="/functions/strchr">strchr</a></li>
<li><a href="/functions/strcmp">strcmp</a></li>
<li><a href="/functions/strcoll">strcoll</a></li>
<li><a href="/functions/strcspn">strcspn</a></li>
<li><a href="/functions/strip_tags">strip_tags</a></li>
<li><a href="/functions/stripos">stripos</a></li>
<li><a href="/functions/stripslashes">stripslashes</a></li>
<li><a href="/functions/stristr">stristr</a></li>
<li><a href="/functions/strlen">strlen</a></li>
<li><a href="/functions/strnatcasecmp">strnatcasecmp</a></li>
<li><a href="/functions/strnatcmp">strnatcmp</a></li>
<li><a href="/functions/strncasecmp">strncasecmp</a></li>
<li><a href="/functions/strncmp">strncmp</a></li>
<li><a href="/functions/strpbrk">strpbrk</a></li>
<li><a href="/functions/strpos">strpos</a></li>
<li><a href="/functions/strrchr">strrchr</a></li>
<li><a href="/functions/strrev">strrev</a></li>
<li><a href="/functions/strripos">strripos</a></li>
<li><a href="/functions/strrpos">strrpos</a></li>
<li><a href="/functions/strspn">strspn</a></li>
<li><a href="/functions/strstr">strstr</a></li>
<li><a href="/functions/strtok">strtok</a></li>
<li><a href="/functions/strtolower">strtolower</a></li>
<li><a href="/functions/strtoupper">strtoupper</a></li>
<li><a href="/functions/strtr">strtr</a></li>
<li><a href="/functions/substr">substr</a></li>
<li><a href="/functions/substr_compare">substr_compare</a></li>
<li><a href="/functions/substr_count">substr_count</a></li>
<li><a href="/functions/substr_replace">substr_replace</a></li>
<li><a href="/functions/trim">trim</a></li>
<li><a href="/functions/ucfirst">ucfirst</a></li>
<li><a href="/functions/ucwords">ucwords</a></li>
<li><a href="/functions/vprintf">vprintf</a></li>
<li><a href="/functions/vsprintf">vsprintf</a></li>
<li><a href="/functions/wordwrap">wordwrap</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://ic4ever.com" rel="nofollow">randy</a>
</strong>
on 2012-06-28 03:12:24 <br />
Very nice function. It worked great for me. I came here 1st!
But then I also found this method ..
<pre><code>
var a = 'one &lt;p&gt; tag';
$('&lt;div/&gt;').text(a); // [&lt;div&gt;​one &lt;p&gt; tag​&lt;/div&gt;​]
$('&lt;div/&gt;').text(a).html(); // &quot;one &amp;lt;p&amp;gt; tag&quot;
</code></pre>
The $(element) creates an html element, .text(a) sets the element content to the text (read &quot;escaped&quot;) value of &quot;a&quot;, the .hmtl() gets the html value of the contents of the element. As in .innerHTML.

Very nice also for you if you use jQuery.
<hr />


<strong>
s
</strong>
on 2011-04-18 13:27:32 <br />
SSSSSS
<hr />


<strong>
test
</strong>
on 2010-05-21 14:49:29 <br />
&lt;?php echo &#8216;hello admin!&#8217;; ?&gt;
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-02-12 18:43:39 <br />
@hacksmw: When I try <pre><code>alert(htmlspecialchars_decode('&amp; amp;#9787;'))</code></pre>

&#8230;I do get &amp; #9787; in our php.js JavaScript.

Make sure you are using the latest code (see http://github.com/kvz/phpjs/raw/master/functions/strings/htmlspecialchars_decode.js ).
<hr />


<strong>
hacksmw
</strong>
on 2010-02-11 08:53:42 <br />
htmlspecialchars_decode function in PHP doesn&#8217;t work recursive.
but this function is too recursive.
so &quot;&amp; amp; #9787;&quot; will not be converted by this function as &quot;&amp; #9787;&quot;
however, it will be converted as &quot;☻&quot;
on the other hand, 
the function in php will convert it as &quot;&amp;# 9787;&quot;

(
i can&#8217;t delete my old comment.
so, i wrote this comment once again :(
)
<hr />


<strong>
hacksmw
</strong>
on 2010-02-11 08:50:55 <br />
htmlspecialchars_decode function in PHP doesn&#8217;t work recursive.
but this function is too recursive.
so &quot;&amp;amp; #9787;&quot; will not be converted by this function as &quot;&amp; #9787;&quot;
however, it will be converted as &quot;☻&quot;
on the other hand, 
the function in php will convert it as &quot;&amp;# 9787;&quot;

(
i can&#8217;t delete my old comment.
so, i wrote this comment once again :(
)
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-12-07 10:33:54 <br />
@Felix: Thanks for the feedback. Yes, I pushed earlier to the git repo with the fix. Was my oversight as I was testing in Firefox which doesn&#8217;t have a problem with trailing commas.  htmlspecialchars_decode() also had the issue which I fixed as well. Thanks again!
<hr />


<strong>
felix
</strong>
on 2009-12-06 15:22:04 <br />
problem solved.. wrong synthax in in row 38/39.. after &quot;&#8217;ENT_IGNORE&#8217; : 4&quot; there&#8217;s  a comma but it shouldnt be there ^^
<hr />


<strong>
felix
</strong>
on 2009-12-05 20:46:30 <br />
Hi,

seems that the script has problems with ie6 + 7 .. here the browser says &quot;object expected&quot; in line 41/42&#8230; ???

also.. does this function work with utf-8 ?
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-07-03 14:01:23 <br />
@ T.Wild: Hey man. Thanks a lot for testing this. I&#8217;ve patched it in SVN, and things will be online shortly
<hr />


<strong>
T.Wild
</strong>
on 2009-07-02 23:23:02 <br />
Sorry, just to be clear that&#8217;s moving the line over at
get_html_translation_table
<hr />


<strong>
T.Wild
</strong>
on 2009-07-02 23:19:47 <br />
A Frank Forte posted over on strtr (http://phpjs.org/functions/strtr:556#comment_75192) that htmlspecialcharacters is encoding ampersands after encoding other characters.
so &lt; test &gt; becomes andamp;lt test andamp;gt
I&#8217;ve confirmed this myself, and his fix of moving the line
<pre><code>entities['38'] = '&amp;amp;';</code></pre>
to the top of the entities list (before the line
<pre><code>if (useTable === 'HTML_ENTITIES')</code></pre>
seems to work without effecting the other dependent functions:
htmlentities
html_entity_decode
htmlspecialchars_decode
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-01-15 11:21:51 <br />
@ Guilherme Mello: Could you please provide the output you get in php &amp;amp; js?
<hr />


<strong>
Guilherme Mello
</strong>
on 2009-01-14 18:39:15 <br />
If you try htmlspecialchars in PHP with this example, you&#8217;re going to have a different conversion with javascript:

use the string : FS&#8217;IG&#8217;IKU&amp;quot;UJHFE
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-01-07 14:50:17 <br />
@ Ashley Broadley: Thanks for noticing! 
I guess the &amp;amp;amp; character must be the last character when decoding, but the first when encoding!
<hr />


<strong>
<a href="http://blog.ls12style.co.uk" rel="nofollow">Ashley  Broadley</a>
</strong>
on 2009-01-07 11:33:51 <br />
OK, I seem to have fixed this problem.
It turned out that the &amp;amp; symbol  was at the bottom of the ascii decimal array in &#8216;get_html_translation_table&#8217;. I simply moved it to the top and now everything is fine.

Can you test and confirm by emailing me?

Thanks
Ashley
<hr />


<strong>
<a href="http://blog.ls12style.co.uk" rel="nofollow">Ashley  Broadley</a>
</strong>
on 2009-01-07 11:24:05 <br />
I really find the idea of the php.js fantastic! I for one am very impressed with everyones work!

I have noticed a problem with the htmlentities (not sure if it applies to htmlspecialchars):

testing all the available symbols on my keyboard (Â£, &amp;lt;, &amp;gt;, &#8216;, &amp;quot; and such) i alert()&#8217;ed the supposedly encoded string and found that all ampersands were encoded, so &amp;quot;&amp;amp;pound;&amp;quot; would be &amp;quot;&amp;amp;amp;pound;&amp;quot; which then on a html page would echo &amp;quot;&amp;amp;pound;&amp;quot; and not &amp;quot;Â£&amp;quot; as it should.

im not a pro so im not sure whats causing the the bug.

just thought i would let you know!
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-11-13 23:20:15 <br />
@ atv: I&#8217;m not able to reproduce that behavior here. Also, if I run that test, my single quotes are being replaced by #039; entities.

Are you sure you&#8217;re running our latest version?
<hr />


<strong>
<a href="http://thatsaninterestingpoint.org.ua" rel="nofollow">atv</a>
</strong>
on 2008-11-11 19:28:01 <br />
Today, 2008-11-11, this function encodes the string twice, so the output of such code
<pre><code>
htmlspecialchars(&amp;quot;&amp;lt;a href='test'&amp;gt;Test&amp;lt;/a&amp;gt;&amp;quot;, 'ENT_QUOTES')
</code></pre>
will be like this:
<pre><code>
&amp;amp;lt;a href='test'&amp;amp;gt;Test&amp;amp;lt;/a&amp;amp;gt;
</code></pre>
Fix this!
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-10-20 18:41:48 <br />
@ Philip Peterson: It&#8217;s been decided some time ago that we do not want global dependencies (like constants). The method to implement these is to have the functions accept both the integer representation of the constants (leaving it compatible) and the constant as string (for usability). 
I&#8217;ve done some work on merging  get_html_translation_table, htmlentities &amp;amp; htmlspecialchars and their counterparts, check it out if your like.
<hr />


<strong>
Philip Peterson
</strong>
on 2008-10-15 01:46:26 <br />
Here&#8217;s an proposed implementation of get_html_translation_table.  I do have a small problem though, which probably has a simple solution, and I used the actual integer values for constants instead of ENT_QUOTES, etc. &#8230;  would it not be more practical to do so, really, maybe have an optional &amp;quot;CONSTANTS&amp;quot; section in php.js?

Oh well, here&#8217;s my code:

<pre><code>

HTML_SPECIALCHARS=0;
HTML_ENTITIES=1;
ENT_COMPAT=2;
ENT_QUOTES=3;

function get_html_translation_table(table, quote_style)
{
retarr=[];
if(table==0)
{
if(quote_style == 2 || quote_style == 3)
{
  retarr=['&amp;quot;':'&amp;amp;quot', '\'':'&amp;amp;#39;', '&amp;lt;':'&amp;amp;lt;', '&amp;gt;':'&amp;amp;gt;', '&amp;amp;':'&amp;amp;amp;'];
}
if(quote_style == 2)
{
  // remove the ' entry
}
}
else if(table==1)
{
  // Do the same thing as table == 0, but with the huge list of characters found by calling get_html_translation_table(1)
}
}

</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-07-18 08:18:43 <br />
@ Arno: Thank you for correcting me. It should be okay now.
<hr />


<strong>
Arno
</strong>
on 2008-07-01 16:27:24 <br />
I just see that your example here is wrong too. Here is the corrected version:

This is how you could call htmlspecialchars()
<pre><code>
htmlspecialchars(&amp;quot;&amp;lt;a href='test'&amp;gt;Test&amp;lt;/a&amp;gt;&amp;quot;, 'ENT_QUOTES');
</code></pre>
And that would return
<pre><code>
&amp;amp;lt;a href=&amp;amp;#039;test&amp;amp;#039;&amp;amp;gt;Test&amp;amp;lt;/a&amp;amp;gt;
</code></pre>
<hr />


<strong>
Arno
</strong>
on 2008-07-01 16:23:34 <br />
First of all thanks for this great work, does really help a lot.

However this issue doesn&#8217;t seem fixed yet.

As Nathan already pointed out, you have to remove the single quotes in your regexp. so that it reads

<pre><code>
string = string.replace(/&amp;lt;/g, '&amp;amp;lt;');
</code></pre>

Arno
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-05-31 12:34:30 <br />
@ Nathan: Thanks for pointing this out, fixed.
<hr />


<strong>
Nathan
</strong>
on 2008-05-26 12:07:03 <br />
The source code doesn&#8217;t work at all. There are two errors.
To fix it try this:

var reg=/&amp;amp;/g
string=string.replace(reg, &#8216;&amp;amp;amp;&#8217;);
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/htmlspecialchars/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/htmlspecialchars/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/htmlspecialchars/index.html';
        var disqus_url = 'http://phpjs.org/functions/htmlspecialchars/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
