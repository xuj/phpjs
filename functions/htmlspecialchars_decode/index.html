
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript htmlspecialchars_decode function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript htmlspecialchars_decode function A JavaScript equivalent of PHP&#8217;s htmlspecialchars_decode strings/htmlspecialchars_decode.js raw on &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/htmlspecialchars_decode/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<a target="_blank" href="https://github.com/kvz/phpjs">
  <img id="fork-us" style="position: absolute; z-index: 99; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
</a>
<body   class="no-sidebar"  >
  <header role="banner"><hgroup>
  <div id="logo">
    <h1><a href="/">php.js</a></h1>
  	<div class="clear"></div>
  </div>

  
  
    <h2>Learn how to do it in JavaScript. Explore boundaries porting languages. Enjoy functions that turn out to be useful.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript htmlspecialchars_decode function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s htmlspecialchars_decode</p>

<figure class='code'><figcaption><span>strings/htmlspecialchars_decode.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/strings/htmlspecialchars_decode.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">htmlspecialchars_decode</span> <span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">quote_style</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: Mirek Slugen</span>
</span><span class='line'>  <span class="c1">// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Mateusz &quot;loonquawl&quot; Zalega</span>
</span><span class='line'>  <span class="c1">// +      input by: ReverseSyntax</span>
</span><span class='line'>  <span class="c1">// +      input by: Slawomir Kaniecki</span>
</span><span class='line'>  <span class="c1">// +      input by: Scott Cariss</span>
</span><span class='line'>  <span class="c1">// +      input by: Francois</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Onno Marsman</span>
</span><span class='line'>  <span class="c1">// +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +      input by: Ratheous</span>
</span><span class='line'>  <span class="c1">// +      input by: Mailfaker (http://www.weedem.fr/)</span>
</span><span class='line'>  <span class="c1">// +      reimplemented by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +    bugfixed by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// *     example 1: htmlspecialchars_decode(&quot;&lt;p&gt;this -&amp;gt; &amp;quot;&lt;/p&gt;&quot;, &#39;ENT_NOQUOTES&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 1: &#39;&lt;p&gt;this -&gt; &amp;quot;&lt;/p&gt;&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 2: htmlspecialchars_decode(&quot;&amp;amp;quot;&quot;);</span>
</span><span class='line'>  <span class="c1">// *     returns 2: &#39;&amp;quot;&#39;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">optTemp</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">noquotes</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">quote_style</span> <span class="o">===</span> <span class="s1">&#39;undefined&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">quote_style</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">toString</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;lt;/g</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;gt;/g</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">OPTS</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s1">&#39;ENT_NOQUOTES&#39;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_HTML_QUOTE_SINGLE&#39;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_HTML_QUOTE_DOUBLE&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_COMPAT&#39;</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_QUOTES&#39;</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;ENT_IGNORE&#39;</span><span class="o">:</span> <span class="mi">4</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">quote_style</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">noquotes</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">quote_style</span> <span class="o">!==</span> <span class="s1">&#39;number&#39;</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Allow for a single string or an array of string flags</span>
</span><span class='line'>    <span class="nx">quote_style</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">quote_style</span><span class="p">);</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">quote_style</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// Resolve string input to bitwise e.g. &#39;PATHINFO_EXTENSION&#39; becomes 4</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">OPTS</span><span class="p">[</span><span class="nx">quote_style</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">noquotes</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">OPTS</span><span class="p">[</span><span class="nx">quote_style</span><span class="p">[</span><span class="nx">i</span><span class="p">]])</span> <span class="p">{</span>
</span><span class='line'>        <span class="nx">optTemp</span> <span class="o">=</span> <span class="nx">optTemp</span> <span class="o">|</span> <span class="nx">OPTS</span><span class="p">[</span><span class="nx">quote_style</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nx">quote_style</span> <span class="o">=</span> <span class="nx">optTemp</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="nx">quote_style</span> <span class="o">&amp;</span> <span class="nx">OPTS</span><span class="p">.</span><span class="nx">ENT_HTML_QUOTE_SINGLE</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;#0*39;/g</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">);</span> <span class="c1">// PHP doesn&#39;t currently escape if more than one 0, but it should</span>
</span><span class='line'>    <span class="c1">// string = string.replace(/&amp;apos;|&amp;#x0*27;/g, &quot;&#39;&quot;); // This would also be useful here, but not a part of PHP</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">noquotes</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;quot;/g</span><span class="p">,</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="c1">// Put this in last place to avoid escape being double-decoded</span>
</span><span class='line'>  <span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&amp;amp;/g</span><span class="p">,</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">string</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/strings/htmlspecialchars_decode.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/strings/htmlspecialchars_decode.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">htmlspecialchars_decode</span><span class="p">(</span><span class="s2">&quot;&lt;p&gt;this -&amp;gt; &amp;quot;&lt;/p&gt;&quot;</span><span class="p">,</span> <span class="s1">&#39;ENT_NOQUOTES&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;&lt;p&gt;this -&gt; &amp;quot;&lt;/p&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">htmlspecialchars_decode</span><span class="p">(</span><span class="s2">&quot;&amp;amp;quot;&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;&amp;quot;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the strings extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/addcslashes">addcslashes</a></li>
<li><a href="/functions/addslashes">addslashes</a></li>
<li><a href="/functions/bin2hex">bin2hex</a></li>
<li><a href="/functions/chop">chop</a></li>
<li><a href="/functions/chr">chr</a></li>
<li><a href="/functions/chunk_split">chunk_split</a></li>
<li><a href="/functions/convert_cyr_string">convert_cyr_string</a></li>
<li><a href="/functions/convert_uuencode">convert_uuencode</a></li>
<li><a href="/functions/count_chars">count_chars</a></li>
<li><a href="/functions/crc32">crc32</a></li>
<li><a href="/functions/echo">echo</a></li>
<li><a href="/functions/explode">explode</a></li>
<li><a href="/functions/get_html_translation_table">get_html_translation_table</a></li>
<li><a href="/functions/html_entity_decode">html_entity_decode</a></li>
<li><a href="/functions/htmlentities">htmlentities</a></li>
<li><a href="/functions/htmlspecialchars">htmlspecialchars</a></li>
<li><a href="/functions/htmlspecialchars_decode">htmlspecialchars_decode</a></li>
<li><a href="/functions/implode">implode</a></li>
<li><a href="/functions/join">join</a></li>
<li><a href="/functions/lcfirst">lcfirst</a></li>
<li><a href="/functions/levenshtein">levenshtein</a></li>
<li><a href="/functions/localeconv">localeconv</a></li>
<li><a href="/functions/ltrim">ltrim</a></li>
<li><a href="/functions/md5">md5</a></li>
<li><a href="/functions/md5_file">md5_file</a></li>
<li><a href="/functions/metaphone">metaphone</a></li>
<li><a href="/functions/money_format">money_format</a></li>
<li><a href="/functions/nl2br">nl2br</a></li>
<li><a href="/functions/nl_langinfo">nl_langinfo</a></li>
<li><a href="/functions/number_format">number_format</a></li>
<li><a href="/functions/ord">ord</a></li>
<li><a href="/functions/parse_str">parse_str</a></li>
<li><a href="/functions/printf">printf</a></li>
<li><a href="/functions/quoted_printable_decode">quoted_printable_decode</a></li>
<li><a href="/functions/quoted_printable_encode">quoted_printable_encode</a></li>
<li><a href="/functions/quotemeta">quotemeta</a></li>
<li><a href="/functions/rtrim">rtrim</a></li>
<li><a href="/functions/setlocale">setlocale</a></li>
<li><a href="/functions/sha1">sha1</a></li>
<li><a href="/functions/sha1_file">sha1_file</a></li>
<li><a href="/functions/similar_text">similar_text</a></li>
<li><a href="/functions/soundex">soundex</a></li>
<li><a href="/functions/split">split</a></li>
<li><a href="/functions/sprintf">sprintf</a></li>
<li><a href="/functions/sscanf">sscanf</a></li>
<li><a href="/functions/str_getcsv">str_getcsv</a></li>
<li><a href="/functions/str_ireplace">str_ireplace</a></li>
<li><a href="/functions/str_pad">str_pad</a></li>
<li><a href="/functions/str_repeat">str_repeat</a></li>
<li><a href="/functions/str_replace">str_replace</a></li>
<li><a href="/functions/str_rot13">str_rot13</a></li>
<li><a href="/functions/str_shuffle">str_shuffle</a></li>
<li><a href="/functions/str_split">str_split</a></li>
<li><a href="/functions/str_word_count">str_word_count</a></li>
<li><a href="/functions/strcasecmp">strcasecmp</a></li>
<li><a href="/functions/strchr">strchr</a></li>
<li><a href="/functions/strcmp">strcmp</a></li>
<li><a href="/functions/strcoll">strcoll</a></li>
<li><a href="/functions/strcspn">strcspn</a></li>
<li><a href="/functions/strip_tags">strip_tags</a></li>
<li><a href="/functions/stripos">stripos</a></li>
<li><a href="/functions/stripslashes">stripslashes</a></li>
<li><a href="/functions/stristr">stristr</a></li>
<li><a href="/functions/strlen">strlen</a></li>
<li><a href="/functions/strnatcasecmp">strnatcasecmp</a></li>
<li><a href="/functions/strnatcmp">strnatcmp</a></li>
<li><a href="/functions/strncasecmp">strncasecmp</a></li>
<li><a href="/functions/strncmp">strncmp</a></li>
<li><a href="/functions/strpbrk">strpbrk</a></li>
<li><a href="/functions/strpos">strpos</a></li>
<li><a href="/functions/strrchr">strrchr</a></li>
<li><a href="/functions/strrev">strrev</a></li>
<li><a href="/functions/strripos">strripos</a></li>
<li><a href="/functions/strrpos">strrpos</a></li>
<li><a href="/functions/strspn">strspn</a></li>
<li><a href="/functions/strstr">strstr</a></li>
<li><a href="/functions/strtok">strtok</a></li>
<li><a href="/functions/strtolower">strtolower</a></li>
<li><a href="/functions/strtoupper">strtoupper</a></li>
<li><a href="/functions/strtr">strtr</a></li>
<li><a href="/functions/substr">substr</a></li>
<li><a href="/functions/substr_compare">substr_compare</a></li>
<li><a href="/functions/substr_count">substr_count</a></li>
<li><a href="/functions/substr_replace">substr_replace</a></li>
<li><a href="/functions/trim">trim</a></li>
<li><a href="/functions/ucfirst">ucfirst</a></li>
<li><a href="/functions/ucwords">ucwords</a></li>
<li><a href="/functions/vprintf">vprintf</a></li>
<li><a href="/functions/vsprintf">vsprintf</a></li>
<li><a href="/functions/wordwrap">wordwrap</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://filesharepoint.com" rel="nofollow">Robert Sidlauskas</a>
</strong>
on 2010-07-10 11:23:14 <br />
Hi its good.

&lt;a href=&#8217;http://filesharepoit.com&#8217;&gt;Filesharepoint.com&lt;/a&gt; 
<hr />


<strong>
Jerry
</strong>
on 2010-04-27 19:07:58 <br />
Very nice - I think I will use your modification as its much tidier.
Don&#8217;t forget the &#8216;g&#8217; attribute on the last pattern.
<hr />


<strong>
<a href="http://blog.kukawski.pl" rel="nofollow">Rafa? Kukawski</a>
</strong>
on 2010-04-27 17:27:48 <br />
Sorry for the double comment, but now the code should be more readable

<pre><code>function htmlspecialchars_decode(input, quote_style) {
    var c = {
        '&amp;amp;': '&amp;',
        '&amp;lt;': '&lt;',
        '&amp;gt;': '&gt;',
        '&amp;quot;': '&quot;',
        '&amp;#039;': '\''
    };
    return ('' + input).replace(
        quote_style === 'ENT_QUOTES' ? /&amp;amp;|&amp;lt;|&amp;gt;|&amp;quot;|&amp;#039;/g :
        quote_style === 'ENT_NOQUOTES' ? /&amp;amp;|&amp;lt;|&amp;gt;/g :
        /&amp;amp;|&amp;lt;|&amp;gt;|&amp;quot;/,
        function (a) {
            return c[a];
        }
    );
}</code></pre>
<hr />


<strong>
<a href="http://blog.kukawski.pl" rel="nofollow">Rafa? Kukawski</a>
</strong>
on 2010-04-27 17:19:59 <br />
@Jerry: very short and clean solution. I just managed to replace the 3 .replace calls with just one, by choosing the regexp with a conditional expression.
<pre><code>function htmlspecialchars_decode(input, quote_style){
   var c = {
      '&amp;amp;': '&amp;',
      '&amp;lt;': '&lt;',
      '&amp;gt;': '&gt;',
      '&amp;quot;': '&quot;',
      '&amp;#039;': '\''
   };
   return ('' + input).replace(quote_style === 'ENT_QUOTES' ? /&amp;amp;|&amp;lt;|&amp;gt;|&amp;quot;|&amp;#039;/g : quote_style === 'ENT_NOQUOTES' ? /&amp;amp;|&amp;lt;|&amp;gt;/g : /&amp;amp;|&amp;lt;|&amp;gt;|&amp;quot;/, function(a){return c[a]; });
}</code></pre>

The performance of both solutions should be comparable.
And I added casting of the input to string.
<hr />


<strong>
Jerry
</strong>
on 2010-04-27 07:20:39 <br />
Here is my simple implementation of htmlspecialchars_decode.
I use just one replace and I have not come across a situation where an html entity is double-decoded. Comments are welcome
<pre><code>
function(a,b){
var c={
     '&amp;amp;':'&amp;',
     '&amp;lt;':'&lt;',
     '&amp;gt;':'&gt;',
     '&amp;quot;':'&quot;',
     '&amp;#039;':'\''
};
     if(b==='ENT_QUOTES'){
     return a.replace(/&amp;amp;|&amp;lt;|&amp;gt;|&amp;quot;|&amp;#039;/g,function(a){return c[a];});
     }
     else if(b==='ENT_NOQUOTES'){
     return a.replace(/&amp;amp;|&amp;lt;|&amp;gt;/g,function(a){return c[a];});
     }
     else{
     return a.replace(/&amp;amp;|&amp;lt;|&amp;gt;|&amp;quot;/g,function(a){return c[a];});
     }
}
</code></pre>
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-02-13 04:39:10 <br />
See my comment under htmlspecialchars()
<hr />


<strong>
hacksmw
</strong>
on 2010-02-11 08:47:27 <br />
htmlspecialchars_decode function in PHP doesn&#8217;t work recursive.
but this function is too recursive.
so &quot;&amp;amp;#9787;&quot; will not be converted by this function as &quot;&amp;#9787;&quot;
however, it will be converted as &quot;â˜»&quot;
on the other hand, 
the function in php will convert it as &quot;&amp;#9787;&quot;
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-11-25 12:47:32 <br />
@Mailfaker: Thanks. I&#8217;ve completely redone the two htmlspecialchars functions in Git, also to handle flags and arguments: http://github.com/kvz/phpjs/commit/881de8748cf986d025ecfad5f448fbbb8ba7710e  . Btw, using replace was much faster for me (and easier) than using split and join.
<hr />


<strong>
<a href="http://www.weedem.fr" rel="nofollow">Mailfaker</a>
</strong>
on 2009-11-25 01:05:38 <br />
Hi everyone,
this code wasn&#8217;t working for me. I have done some changes and now it runs.
The problem is that, for decoding, hash_map table must be read in descending order. Or simply, you can do so:
<pre><code>
function htmlspecialchars_decode (string) {
    tmp_str = string.toString();
    tmp_str = tmp_str.split('&amp;quot;').join('&quot;');
    tmp_str = tmp_str.split('&amp;lt;').join('&lt;');
    tmp_str = tmp_str.split('&amp;gt;').join('&gt;');
    tmp_str = tmp_str.split('&amp;amp;').join('&amp;');
    return tmp_str;
}
</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-08-16 15:38:06 <br />
@ Liviu Mirea: I added your example as a testcase, but I was unable to reproduce the problem. 

What version &amp; browser are you using?
<hr />


<strong>
Liviu Mirea
</strong>
on 2009-08-10 01:31:30 <br />
I&#8217;m sorry but the messaging system seems to be messed up and I can&#8217;t post my message. What I&#8217;m trying to say is that the above function is incorrect. If you try to decode &quot;&amp; amp; quot;&quot; (remove spaces) it will output a double quotation mark instead of &quot;&amp; quot;&quot; (remove spaces). Hope this message will be properly posted. :/
<hr />


<strong>
Liviu Mirea
</strong>
on 2009-08-10 01:26:14 <br />
Erm, ignore my message below, the caracters are messed up.
Here:
<pre><code>
htmlspecialchars_decode(' &amp;amp;quot; '); 
</code></pre>
In PHP it returns: 
<pre><code>
&amp;quot;
</code></pre>

The Javascript function above returns: &quot;
Basically, it first decodes <pre><code>&quot;&amp;amp;&quot;</code></pre> to <pre><code>&quot;&amp;&quot;</code></pre>, thus resulting <pre><code>&quot;&amp;quot;&quot;</code></pre>. It further decodes the string to a double quotation mark when it shouldn&#8217;t.
<hr />


<strong>
Liviu Mirea
</strong>
on 2009-08-10 01:22:57 <br />
<pre><code>
htmlspecialchars_decode(' &amp;amp;quot; '); 
</code></pre>
In PHP it returns: &amp;quot;

The Javascript function above returns: &quot;
Basically, it first decodes &quot;&amp;amp;&quot; to &quot;&amp;&quot;, thus resulting &quot;&amp;quot;&quot;. Afterward, it decodes &quot;&amp;quot;&quot; but it shouldn&#8217;t.
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-09-29 12:31:25 <br />
@ ReverseSyntax &amp;amp;  Onno Marsman: Wow that was ugly. Sorry everyone. Fixed.
<hr />


<strong>
Onno Marsman
</strong>
on 2008-09-25 14:10:12 <br />
There is a serious parse error in this function

<pre><code>
string = string.replace(/&amp;amp;gt;/g '&amp;gt;');
</code></pre>

should be (added a comma):

<pre><code>
string = string.replace(/&amp;amp;gt;/g, '&amp;gt;');
</code></pre>
<hr />


<strong>
ReverseSyntax
</strong>
on 2008-09-25 06:57:11 <br />
There is an error in the htmlspecialchars_decode(),
There a single quote around the regex for all params values in replace() except for &amp;gt; the only one that works. this is in the php.min.js
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-09-21 21:40:22 <br />
<pre><code>
&amp;lt;?php
echo html_entity_decode(&amp;quot;&amp;amp;#56;&amp;quot;).&amp;quot;\n&amp;quot;;
?&amp;gt;
</code></pre>
returns 8. 

This behavior is not documented in the PHP manual though, do you know what table is used here?
<hr />


<strong>
Trevor
</strong>
on 2008-09-17 19:55:32 <br />
Issue: Doesn&#8217;t decode all html escaped characters, such as &amp;amp;#56;
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-07-27 13:50:57 <br />
@ Bob Palin: Thank you for noticing. It is possible to declare global constants in javascript, but that would increase the number of dependencies throughout this project.

We have deliberately chosen to implement this a bit different from the original PHP documentation to allow for more functions to be included separately.
<hr />


<strong>
Bob Palin
</strong>
on 2008-07-27 01:50:45 <br />
The function description says that &#8216;quote_style&#8217; is an int and list constants, in fact the argument is a string as shown in the code and example.
<hr />


<strong>
Mateusz &quot;loonquawl&quot; Zalega (http://loonquawl.yoyo.
</strong>
on 2008-05-31 23:05:17 <br />
No problem :)

There&#8217;s another bug in this function. First argument of called function string.replace() is a string object &#8216;/&amp;amp;amp;/g&#8217;. It won&#8217;t work, unless it&#8217;s a regular expression object (should be /&amp;amp;amp;/g - without the apostrophes).
Here&#8217;s the correct code:
<pre><code>
    string = string.toString();
    
    // Always encode
    string = string.replace(/&amp;amp;amp;/g, '&amp;amp;');
    string = string.replace(/&amp;amp;lt;/g, '&amp;lt;');
    string = string.replace(/&amp;amp;gt;/g, '&amp;gt;');
    
    // Encode depending on quote_style
    if (quote_style == 'ENT_QUOTES') {
        string = string.replace(/&amp;amp;quot;/g, '&amp;quot;');
        string = string.replace(/&amp;amp;#039;/g, '\'');
    } else if (quote_style != 'ENT_NOQUOTES') {
        // All other cases (ENT_COMPAT, default, but not ENT_NOQUOTES)
        string = string.replace(/&amp;amp;quot;/g, '&amp;quot;');
    }
    
    return string;
</code></pre>

This is explained here:
http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Global_Objects:String:replace
http://developer.mozilla.org/en/docs/Core_JavaScript_1.5_Reference:Objects:RegExp

Btw. Most people involved in php2js project have their full names in credits. So, my name&#8217;s Mateusz Zalega. Just saying :)
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-05-31 14:31:41 <br />
@ loonquawl: Guess it should ;) thank you!
<hr />


<strong>
loonquawl
</strong>
on 2008-05-31 10:49:39 <br />
Shouldn&#8217;t it be
<pre><code>
   string = string.replace(/&amp;amp;/g, '&amp;amp;');
   string = string.replace(/&amp;lt;/g, '&amp;lt;');
   string = string.replace(/&amp;gt;/g, '&amp;gt;');
</code></pre>

rather than

<pre><code>
    string.replace('/&amp;amp;/g', '&amp;amp;');
    string.replace('/&amp;lt;/g', '&amp;lt;');
    string.replace(/&amp;gt;/g, '&amp;gt;')
</code></pre>
?

Function (string object).replace() doesn&#8217;t modify the string. It returns a new (replaced) string object.
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/htmlspecialchars_decode/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/htmlspecialchars_decode/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - <a href="http://twitter.com/kvz">Kevin van Zonneveld</a> 
  and <a href="/authors/">contributors</a> -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/htmlspecialchars_decode/index.html';
        var disqus_url = 'http://phpjs.org/functions/htmlspecialchars_decode/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
