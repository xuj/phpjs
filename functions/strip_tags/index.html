
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript strip_tags function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript strip_tags function A JavaScript equivalent of PHP&#8217;s strip_tags strings/strip_tags.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12
13 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/strip_tags/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <a target="_blank" href="https://github.com/kvz/phpjs">
    <img id="fork-us" style="position: fixed; z-index: 99; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>
  <header role="banner"><hgroup>
  <div id="logo">
    <h1><a href="/">php.js</a></h1>
  	<div class="clear"></div>
  </div>

  
  
    <h2>Learn how to do it in JavaScript. Explore boundaries porting languages. Use functions that turn out to be useful.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
  <li><a target="_blank" href="https://github.com/kvz/phpjs/wiki/_pages">Wiki</a></li>
  <li><a target="_blank"  href="http://twitter.com/phpjs">@phpjs</a></li>
  <li><a target="_blank"  href="http://identi.ca/brettz9">@brettz9</a></li>
  <li><a target="_blank"  href="http://twitter.com/kvz">@kvz</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript strip_tags function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s strip_tags</p>

<figure class='code'><figcaption><span>strings/strip_tags.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/strings/strip_tags.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">strip_tags</span> <span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">allowed</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Luke Godfrey</span>
</span><span class='line'>  <span class="c1">// +      input by: Pul</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Onno Marsman</span>
</span><span class='line'>  <span class="c1">// +      input by: Alex</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +      input by: Marc Palau</span>
</span><span class='line'>  <span class="c1">// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +      input by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Eric Nagel</span>
</span><span class='line'>  <span class="c1">// +      input by: Bobby Drake</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   bugfixed by: Tomasz Wesolowski</span>
</span><span class='line'>  <span class="c1">// +      input by: Evertjan Garretsen</span>
</span><span class='line'>  <span class="c1">// +    revised by: Rafał Kukawski (http://blog.kukawski.pl/)</span>
</span><span class='line'>  <span class="c1">// *     example 1: strip_tags(&#39;&lt;p&gt;Kevin&lt;/p&gt; &lt;br /&gt;&lt;b&gt;van&lt;/b&gt; &lt;i&gt;Zonneveld&lt;/i&gt;&#39;, &#39;&lt;i&gt;&lt;b&gt;&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 1: &#39;Kevin &lt;b&gt;van&lt;/b&gt; &lt;i&gt;Zonneveld&lt;/i&gt;&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 2: strip_tags(&#39;&lt;p&gt;Kevin &lt;img src=&quot;someimage.png&quot; onmouseover=&quot;someFunction()&quot;&gt;van &lt;i&gt;Zonneveld&lt;/i&gt;&lt;/p&gt;&#39;, &#39;&lt;p&gt;&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 2: &#39;&lt;p&gt;Kevin van Zonneveld&lt;/p&gt;&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 3: strip_tags(&quot;&lt;a href=&#39;http://kevin.vanzonneveld.net&#39;&gt;Kevin van Zonneveld&lt;/a&gt;&quot;, &quot;&lt;a&gt;&quot;);</span>
</span><span class='line'>  <span class="c1">// *     returns 3: &#39;&lt;a href=&#39;http://kevin.vanzonneveld.net&#39;&gt;Kevin van Zonneveld&lt;/a&gt;&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 4: strip_tags(&#39;1 &lt; 5 5 &gt; 1&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 4: &#39;1 &lt; 5 5 &gt; 1&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 5: strip_tags(&#39;1 &lt;br/&gt; 1&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 5: &#39;1  1&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 6: strip_tags(&#39;1 &lt;br/&gt; 1&#39;, &#39;&lt;br&gt;&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 6: &#39;1  1&#39;</span>
</span><span class='line'>  <span class="c1">// *     example 7: strip_tags(&#39;1 &lt;br/&gt; 1&#39;, &#39;&lt;br&gt;&lt;br/&gt;&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 7: &#39;1 &lt;br/&gt; 1&#39;</span>
</span><span class='line'>  <span class="nx">allowed</span> <span class="o">=</span> <span class="p">(((</span><span class="nx">allowed</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">match</span><span class="p">(</span><span class="sr">/&lt;[a-z][a-z0-9]*&gt;/g</span><span class="p">)</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span> <span class="c1">// making sure the allowed arg is a string containing only tags in lowercase (&lt;a&gt;&lt;b&gt;&lt;c&gt;)</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">tags</span> <span class="o">=</span> <span class="sr">/&lt;\/?([a-z][a-z0-9]*)\b[^&gt;]*&gt;/gi</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">commentsAndPhpTags</span> <span class="o">=</span> <span class="sr">/&lt;!--[\s\S]*?--&gt;|&lt;\?(?:php)?[\s\S]*?\?&gt;/gi</span><span class="p">;</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">input</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">commentsAndPhpTags</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="nx">tags</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$0</span><span class="p">,</span> <span class="nx">$1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">allowed</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;&lt;&#39;</span> <span class="o">+</span> <span class="nx">$1</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span> <span class="nx">$0</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/strings/strip_tags.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/strings/strip_tags.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">strip_tags</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;Kevin&lt;/p&gt; &lt;br /&gt;&lt;b&gt;van&lt;/b&gt; &lt;i&gt;Zonneveld&lt;/i&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;i&gt;&lt;b&gt;&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;Kevin &lt;b&gt;van&lt;/b&gt; &lt;i&gt;Zonneveld&lt;/i&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">strip_tags</span><span class="p">(</span><span class="s1">&#39;&lt;p&gt;Kevin &lt;img src=&quot;someimage.png&quot; onmouseover=&quot;someFunction()&quot;&gt;van &lt;i&gt;Zonneveld&lt;/i&gt;&lt;/p&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;p&gt;&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;&lt;p&gt;Kevin van Zonneveld&lt;/p&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 3</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">strip_tags</span><span class="p">(</span><span class="s2">&quot;&lt;a href=&#39;http://kevin.vanzonneveld.net&#39;&gt;Kevin van Zonneveld&lt;/a&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;a&gt;&quot;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="s1">&#39;&lt;a href=&#39;</span><span class="nx">http</span><span class="o">:</span><span class="c1">//kevin.vanzonneveld.net&#39;&gt;Kevin van Zonneveld&lt;/a&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the strings extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/addcslashes">addcslashes</a></li>
<li><a href="/functions/addslashes">addslashes</a></li>
<li><a href="/functions/bin2hex">bin2hex</a></li>
<li><a href="/functions/chop">chop</a></li>
<li><a href="/functions/chr">chr</a></li>
<li><a href="/functions/chunk_split">chunk_split</a></li>
<li><a href="/functions/convert_cyr_string">convert_cyr_string</a></li>
<li><a href="/functions/convert_uuencode">convert_uuencode</a></li>
<li><a href="/functions/count_chars">count_chars</a></li>
<li><a href="/functions/crc32">crc32</a></li>
<li><a href="/functions/echo">echo</a></li>
<li><a href="/functions/explode">explode</a></li>
<li><a href="/functions/get_html_translation_table">get_html_translation_table</a></li>
<li><a href="/functions/html_entity_decode">html_entity_decode</a></li>
<li><a href="/functions/htmlentities">htmlentities</a></li>
<li><a href="/functions/htmlspecialchars">htmlspecialchars</a></li>
<li><a href="/functions/htmlspecialchars_decode">htmlspecialchars_decode</a></li>
<li><a href="/functions/implode">implode</a></li>
<li><a href="/functions/join">join</a></li>
<li><a href="/functions/lcfirst">lcfirst</a></li>
<li><a href="/functions/levenshtein">levenshtein</a></li>
<li><a href="/functions/localeconv">localeconv</a></li>
<li><a href="/functions/ltrim">ltrim</a></li>
<li><a href="/functions/md5">md5</a></li>
<li><a href="/functions/md5_file">md5_file</a></li>
<li><a href="/functions/metaphone">metaphone</a></li>
<li><a href="/functions/money_format">money_format</a></li>
<li><a href="/functions/nl2br">nl2br</a></li>
<li><a href="/functions/nl_langinfo">nl_langinfo</a></li>
<li><a href="/functions/number_format">number_format</a></li>
<li><a href="/functions/ord">ord</a></li>
<li><a href="/functions/parse_str">parse_str</a></li>
<li><a href="/functions/printf">printf</a></li>
<li><a href="/functions/quoted_printable_decode">quoted_printable_decode</a></li>
<li><a href="/functions/quoted_printable_encode">quoted_printable_encode</a></li>
<li><a href="/functions/quotemeta">quotemeta</a></li>
<li><a href="/functions/rtrim">rtrim</a></li>
<li><a href="/functions/setlocale">setlocale</a></li>
<li><a href="/functions/sha1">sha1</a></li>
<li><a href="/functions/sha1_file">sha1_file</a></li>
<li><a href="/functions/similar_text">similar_text</a></li>
<li><a href="/functions/soundex">soundex</a></li>
<li><a href="/functions/split">split</a></li>
<li><a href="/functions/sprintf">sprintf</a></li>
<li><a href="/functions/sscanf">sscanf</a></li>
<li><a href="/functions/str_getcsv">str_getcsv</a></li>
<li><a href="/functions/str_ireplace">str_ireplace</a></li>
<li><a href="/functions/str_pad">str_pad</a></li>
<li><a href="/functions/str_repeat">str_repeat</a></li>
<li><a href="/functions/str_replace">str_replace</a></li>
<li><a href="/functions/str_rot13">str_rot13</a></li>
<li><a href="/functions/str_shuffle">str_shuffle</a></li>
<li><a href="/functions/str_split">str_split</a></li>
<li><a href="/functions/str_word_count">str_word_count</a></li>
<li><a href="/functions/strcasecmp">strcasecmp</a></li>
<li><a href="/functions/strchr">strchr</a></li>
<li><a href="/functions/strcmp">strcmp</a></li>
<li><a href="/functions/strcoll">strcoll</a></li>
<li><a href="/functions/strcspn">strcspn</a></li>
<li><a href="/functions/strip_tags">strip_tags</a></li>
<li><a href="/functions/stripos">stripos</a></li>
<li><a href="/functions/stripslashes">stripslashes</a></li>
<li><a href="/functions/stristr">stristr</a></li>
<li><a href="/functions/strlen">strlen</a></li>
<li><a href="/functions/strnatcasecmp">strnatcasecmp</a></li>
<li><a href="/functions/strnatcmp">strnatcmp</a></li>
<li><a href="/functions/strncasecmp">strncasecmp</a></li>
<li><a href="/functions/strncmp">strncmp</a></li>
<li><a href="/functions/strpbrk">strpbrk</a></li>
<li><a href="/functions/strpos">strpos</a></li>
<li><a href="/functions/strrchr">strrchr</a></li>
<li><a href="/functions/strrev">strrev</a></li>
<li><a href="/functions/strripos">strripos</a></li>
<li><a href="/functions/strrpos">strrpos</a></li>
<li><a href="/functions/strspn">strspn</a></li>
<li><a href="/functions/strstr">strstr</a></li>
<li><a href="/functions/strtok">strtok</a></li>
<li><a href="/functions/strtolower">strtolower</a></li>
<li><a href="/functions/strtoupper">strtoupper</a></li>
<li><a href="/functions/strtr">strtr</a></li>
<li><a href="/functions/substr">substr</a></li>
<li><a href="/functions/substr_compare">substr_compare</a></li>
<li><a href="/functions/substr_count">substr_count</a></li>
<li><a href="/functions/substr_replace">substr_replace</a></li>
<li><a href="/functions/trim">trim</a></li>
<li><a href="/functions/ucfirst">ucfirst</a></li>
<li><a href="/functions/ucwords">ucwords</a></li>
<li><a href="/functions/vprintf">vprintf</a></li>
<li><a href="/functions/vsprintf">vsprintf</a></li>
<li><a href="/functions/wordwrap">wordwrap</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://an3m1.com/" rel="nofollow">????? ?????? ? ?????</a>
</strong>
on 2012-04-04 14:33:20 <br />
I wonder how you got so good. HaHa ! This is really a fascinating blog, lots of stuff that I can get into. One thing I just want to say is that your design is so perfect ! You certainly know how to get a girls attention ! I’m glad that you’re here. I feel like I’ve learned something new by being here 
<hr />


<strong>
Roger
</strong>
on 2012-03-28 05:16:43 <br />
Awesome &amp; thanks!
<hr />


<strong>
<a href="jkhvkjb" rel="nofollow">sacdmn sda.m,c nads,.cn n65467289376541248321908643218694321</a>
</strong>
on 2011-03-31 09:29:16 <br />
!@#$%^&amp;*())(*&amp;^%$#@
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2010-09-08 20:06:17 <br />
@ Chris: Sorry, if the comment system is letting you down here, could you try pasting to pastebin.org?

@ Evertjan Garretsen: Looks like the PHP version needs you to explicitly put br/ in the list of allowed tags

@ Rafał Kukawski: Sublime man. In fact your creation&#8217;s so good that it&#8217;s better than PHP&#8217;s version. Have a look at example 6 and you will see that PHP (5.3.2) will require you to explicitly name br/ in the allow list.

I&#8217;m still including your version in php.js, though, as I don&#8217;t think this will cause bad bugs for people (seems like if you&#8217;re whitelisting br you intend to whitelist br/ as well) so we can fix it later on.

https://github.com/kvz/phpjs/commit/526ac02243899b12cd0929c0a25133304525c0e8
<hr />


<strong>
Evertjan Garretsen
</strong>
on 2010-09-07 23:14:41 <br />
I discovered that when i allow br, this wil not allow the xhtml closed br like: &lt;br/&gt;. Maybe the following line should be added?
<pre><code>
if (i != 0) { i = html.toLowerCase().indexOf('&lt;'+allowed_tag+'/&gt;');}
</code></pre>
<hr />


<strong>
<a href="http://blog.kukawski.pl" rel="nofollow">Rafa? Kukawski</a>
</strong>
on 2010-07-15 12:02:30 <br />
I extended my previous solution with removing comments and php tags. May not be perfect, but should work for most cases

<pre><code>function strip_tags(input, allowed){
   allowed = (((allowed || &quot;&quot;) + &quot;&quot;)
      .toLowerCase()
      .match(/&lt;[a-z][a-z0-9]*&gt;/g) || [])
      .join(''); // making sure the allowed arg is a string containing only tags in lowercase (&lt;a&gt;&lt;b&gt;&lt;c&gt;)
   var tags = /&lt;\/?([a-z][a-z0-9]*)\b[^&gt;]*&gt;/gi,
       commentsAndPhpTags = /&lt;!--[\s\S]*?--&gt;|&lt;\?(?:php)?[\s\S]*?\?&gt;/gi;
   return input.replace(commentsAndPhpTags, '').replace(tags, function($0, $1){
      return allowed.indexOf('&lt;' + $1.toLowerCase() + '&gt;') &gt; -1 ? $0 : '';
   });
}</code></pre>
<hr />


<strong>
<a href="http://blog.kukawski.pl" rel="nofollow">Rafa? Kukawski</a>
</strong>
on 2010-07-15 08:39:26 <br />
Maybe sth like this?

<pre><code>function strip_tags(input, allowed){
   allowed = (((allowed || &quot;&quot;) + &quot;&quot;)
      .toLowerCase()
      .match(/&lt;[a-z][a-z0-9]*&gt;/g) || [])
      .join(''); // making sure the allowed arg is a string containing only tags in lowercase (&lt;a&gt;&lt;b&gt;&lt;c&gt;)
   var reg = /(&lt;\/?([a-z][a-z0-9]*)\b[^&gt;]*&gt;)/gi;
   return input.replace(reg, function($0, $1, $2){
      return allowed.indexOf('&lt;' + $2.toLowerCase() + '&gt;') &gt; -1 ? $0 : '';
   });
}</code></pre>
<hr />


<strong>
Chris
</strong>
on 2010-07-14 10:18:52 <br />
Hey,
I have a slight problem with html comments. See this example:
<pre><code>&lt;h2 class=&quot;error&quot;&gt;Ooops, das hätte nicht passieren dürfen!&lt;/h2&gt;

&lt;div class=&quot;graybox&quot;&gt;
Die angegebene Adresse ist mit Ihren Benutzerrechten nicht erreichbar.&lt;br /&gt;
&lt;!--Sie werden in &lt;strong id=&quot;cnt&quot;&gt;&amp;nbsp;&lt;/strong&gt; Sekunden zur Startseite weitergeleitet...--&gt;
&lt;/div&gt;</code></pre>

JS result:
<pre><code>Ooops, das hätte nicht passieren dürfen! Die angegebene Adresse ist mit Ihren Benutzerrechten nicht erreichbar. &amp;nbsp; Sekunden zur Startseite weitergeleitet...--&gt;</code></pre>

See missing &quot;Sie werden in&quot; and additional &quot;&#8211;&gt;&quot; in the JS result.
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-08-04 12:30:14 <br />
@ Brett Zamir: Ok provided an additional fix. After comment caches clear we should be able to review the results.
<hr />


<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-07-29 03:06:44 <br />
@Kevin: Thanks for the security fix, and sorry I&#8217;m too busy to look into it myself at the moment, but now the code snippets are showing less-than signs, etc. in entity form&#8230;
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-07-24 12:29:04 <br />
@ Tomasz Wesolowski: Very kind of you to provide the fix! I&#8217;ve added it to SVN along with the credits.

PS: oops indeed! fixed the comment issue
<hr />


<strong>
Tomasz Wesolowski
</strong>
on 2009-07-22 15:39:08 <br />
Oops, no HTML escaping in posts? Here&#8217;s a cleaner repost:
&#8212;

That&#8217;s some useful code. :)

Unfortunately it seems to fail on header tags h1..h7. I have probably fixed that by changing the line 42:

<pre><code>// Build allowes tags associative array
if (allowed_tags) {
    allowed_array = allowed_tags.match(/([a-zA-Z]+)/gi);
}</code></pre>

to 

<pre><code>allowed_array = allowed_tags.match(/([a-zA-Z0-9]+)/gi);</code></pre>
<hr />


<strong>
Tomasz Wesolowski
</strong>
on 2009-07-22 15:37:14 <br />
That&#8217;s some useful code. :)

Unfortunately it seems to fail on header tags &lt;h1&gt;..&lt;h7&gt;. I have probably fixed that by changing the line 42:

// Build allowes tags associative array
<pre><code>if (allowed_tags) {
    allowed_array = allowed_tags.match(/([a-zA-Z]+)/gi);
}</code></pre>

to 

<pre><code>allowed_array = allowed_tags.match(/([a-zA-Z0-9]+)/gi);</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-03-22 18:55:32 <br />
@ Bobby Drake: Thanks for pointing that out. I fixed the bug and added your testcase to prevent future bugs. Thanks!
<hr />


<strong>
Michael Grier
</strong>
on 2009-03-04 20:46:13 <br />
what does !! do here? validate? convert int to bool? 

array unique is using this function internally, but array_unique is not working for me (it returns undefined), and I&#8217;m trying to figure out why.
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-03-02 14:39:39 <br />
@ Eric Nagel: Great, thanks for pointing that out!
<hr />


<strong>
<a href="http://www.ericnagel.com/" rel="nofollow">Eric Nagel</a>
</strong>
on 2009-02-27 22:05:14 <br />
Thanks for the function.  I added:
<pre><code>
var k = '', i = 0;
</code></pre>

in your variable declarations, as I was using k and i outside the function, which put things into a nasty loop.  Hope this helps someone.
<hr />


<strong>
<a href="http://computerzworld.com" rel="nofollow">Computerzworld</a>
</strong>
on 2009-01-24 06:36:43 <br />
You have a great collection of  PHP equivalent javascript functions. This is really helpful to develpers. Thanks for sharing.
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-11-18 12:27:39 <br />
@ Marc Palau: That was a bit of legacy you spotted there, removed it. thx!
<hr />


<strong>
<a href="http://www.nbsp.es" rel="nofollow">Marc Palau</a>
</strong>
on 2008-11-18 10:50:12 <br />
Why is defined allowed_keys??

<pre><code>var allowed_keys = {};</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-10-21 10:07:37 <br />
@ Alex: I wasn&#8217;t aware of this implementation. And, you&#8217;re right: it is our objective to mimic php as much as reasonably possible. Thanks for sharing, I&#8217;ve updated the function and credited you accordingly.
<hr />


<strong>
<a href="http://deliciousdemon.com" rel="nofollow">Alex</a>
</strong>
on 2008-10-20 21:02:54 <br />
It looks like there&#8217;s a small difference in your JS implementation of strip_tags from PHP&#8217;s implementation:

PHP declares multiple allowable tags like this: strip_tags(&#8216;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;text&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&#8217;, &#8216;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&#8217;)

The JS version is like this:
strip_tags(&#8216;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;text&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&#8217;, &#8216;&amp;lt;p&amp;gt;,&amp;lt;b&amp;gt;&#8217;)

Note the comma separation in the JS version between the allowable tags. It&#8217;s not a big deal, but I thought I&#8217;d point it out, as it tripped me up for a while (and I thought you&#8217;d want to know since you&#8217;re attempting to make these functions work syntactically the same as their PHP equivalents). Thanks!
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-09-17 13:06:23 <br />
@ Pul: Thank you for pointing that out. I&#8217;ve fixed the code and added your usage example so it will be tested in the future as well.
<hr />


<strong>
Pul
</strong>
on 2008-09-15 15:44:15 <br />
try
<pre><code>
strip_tags(&amp;quot;&amp;lt;a href='index.html'&amp;gt;test&amp;lt;/a&amp;gt;&amp;quot;, &amp;quot;&amp;lt;a&amp;gt;&amp;quot;);
</code></pre>

please fix.. :P
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-07-18 09:29:26 <br />
@ Steven Richards: I&#8217;ve made what I think is the right change. Does this work okay?
<hr />


<strong>
Steven Richards
</strong>
on 2008-07-09 03:23:59 <br />
The strip_tags() function appears to be broken in IE7. Upon detecting an opening tag, it completely removes ALL output. The same behavior appears on the test page on this site. It appears that in IE, the match() function returns a copy of the input string and a couple other extraneous values on a successful match, causing the entire string to be replaced by the first matched key (the original input).

To fix, I added this ugly piece of work inside the key loop:
<pre><code>
if (key == '0' || Number(key.toString()))
{
// replacement
}
</code></pre>
<hr />


<strong>
Mohammed
</strong>
on 2008-06-20 06:17:43 <br />
Thanks!
<hr />


<strong>
Rauan
</strong>
on 2008-06-01 21:32:46 <br />
Wow. Thanks, Kevin. That&#8217;s the very important feature. :)
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-05-31 12:33:05 <br />
@ Rauan: PHP.JS is by no means a full PHP implementation in Javascript. But thanks for pointing this out, I&#8217;ve added the functionality
<hr />


<strong>
Rauan
</strong>
on 2008-05-23 23:04:13 <br />
Ok, that&#8217;s great&#8230; But where is exception in regex for allowed_tags?
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/strip_tags/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/strip_tags/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/strip_tags/index.html';
        var disqus_url = 'http://phpjs.org/functions/strip_tags/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
