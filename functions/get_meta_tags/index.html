
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript get_meta_tags function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript get_meta_tags function A JavaScript equivalent of PHP&#8217;s get_meta_tags url/get_meta_tags.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/get_meta_tags/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <a target="_blank" href="https://github.com/kvz/phpjs">
    <img id="fork-us" style="position: absolute; z-index: 99; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>
  <header role="banner"><hgroup>
  <div id="logo">
    <h1><a href="/">php.js</a></h1>
  	<div class="clear"></div>
  </div>

  
  
    <h2>Learn how to do it in JavaScript. Explore boundaries porting languages. Enjoy functions that turn out to be useful.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript get_meta_tags function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s get_meta_tags</p>

<figure class='code'><figcaption><span>url/get_meta_tags.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/url/get_meta_tags.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">get_meta_tags</span> <span class="p">(</span><span class="nx">file</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// Extracts all meta tag content attributes from a file and returns an array</span>
</span><span class='line'>  <span class="c1">//</span>
</span><span class='line'>  <span class="c1">// version: 905.3122</span>
</span><span class='line'>  <span class="c1">// discuss at: http://phpjs.org/functions/get_meta_tags</span>
</span><span class='line'>  <span class="c1">// +   original by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// %        note 1: This function uses XmlHttpRequest and cannot retrieve resource from different domain.</span>
</span><span class='line'>  <span class="c1">// %        note 1: Synchronous so may lock up browser, mainly here for study purposes.</span>
</span><span class='line'>  <span class="c1">// -    depends on: file_get_contents</span>
</span><span class='line'>  <span class="c1">// *     example 1: get_meta_tags(&#39;http://kevin.vanzonneveld.net/pj_test_supportfile_2.htm&#39;);</span>
</span><span class='line'>  <span class="c1">// *     returns 1: {description: &#39;a php manual&#39;, author: &#39;name&#39;, keywords: &#39;php documentation&#39;, &#39;geo_position&#39;: &#39;49.33;-86.59&#39;}</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">fulltxt</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">if</span> <span class="p">(</span><span class="kc">false</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// Use this for testing instead of the line above:</span>
</span><span class='line'>    <span class="nx">fulltxt</span> <span class="o">=</span> <span class="s1">&#39;&lt;meta name=&quot;author&quot; content=&quot;name&quot;&gt;&#39;</span> <span class="o">+</span> <span class="s1">&#39;&lt;meta name=&quot;keywords&quot; content=&quot;php documentation&quot;&gt;&#39;</span> <span class="o">+</span> <span class="s1">&#39;&lt;meta name=&quot;DESCRIPTION&quot; content=&quot;a php manual&quot;&gt;&#39;</span> <span class="o">+</span> <span class="s1">&#39;&lt;meta name=&quot;geo.position&quot; content=&quot;49.33;-86.59&quot;&gt;&#39;</span> <span class="o">+</span> <span class="s1">&#39;&lt;/head&gt;&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">fulltxt</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">file_get_contents</span><span class="p">(</span><span class="nx">file</span><span class="p">).</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^[\s\S]*&lt;\/head&gt;/i</span><span class="p">);</span> <span class="c1">// We have to disallow some character, so we choose a Unicode non-character</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">patt</span> <span class="o">=</span> <span class="sr">/&lt;meta[^&gt;]*?&gt;/gim</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">patt1</span> <span class="o">=</span> <span class="sr">/&lt;meta\s+.*?name\s*=\s*([&#39;&quot;]?)(.*?)\1\s+.*?content\s*=\s*([&#39;&quot;]?)(.*?)\3/gim</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">patt2</span> <span class="o">=</span> <span class="sr">/&lt;meta\s+.*?content\s*=\s*([&#39;&quot;?])(.*?)\1\s+.*?name\s*=\s*([&#39;&quot;]?)(.*?)\3/gim</span><span class="p">;</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">txt</span><span class="p">,</span> <span class="nx">match</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span> <span class="p">((</span><span class="nx">txt</span> <span class="o">=</span> <span class="nx">patt</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">fulltxt</span><span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">while</span> <span class="p">((</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">patt1</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">txt</span><span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">name</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\W/g</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">arr</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">while</span> <span class="p">((</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">patt2</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">txt</span><span class="p">))</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">name</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\W/g</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
</span><span class='line'>      <span class="nx">arr</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">arr</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/url/get_meta_tags.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/url/get_meta_tags.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">get_meta_tags</span><span class="p">(</span><span class="s1">&#39;http://kevin.vanzonneveld.net/pj_test_supportfile_2.htm&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span><span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;a php manual&#39;</span><span class="p">,</span> <span class="nx">author</span><span class="o">:</span> <span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="nx">keywords</span><span class="o">:</span> <span class="s1">&#39;php documentation&#39;</span><span class="p">,</span> <span class="s1">&#39;geo_position&#39;</span><span class="o">:</span> <span class="s1">&#39;49.33;-86.59&#39;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the url extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/base64_decode">base64_decode</a></li>
<li><a href="/functions/base64_encode">base64_encode</a></li>
<li><a href="/functions/get_headers">get_headers</a></li>
<li><a href="/functions/get_meta_tags">get_meta_tags</a></li>
<li><a href="/functions/http_build_query">http_build_query</a></li>
<li><a href="/functions/parse_url">parse_url</a></li>
<li><a href="/functions/rawurldecode">rawurldecode</a></li>
<li><a href="/functions/rawurlencode">rawurlencode</a></li>
<li><a href="/functions/urldecode">urldecode</a></li>
<li><a href="/functions/urlencode">urlencode</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2011-08-23 06:52:33 <br />
دردشة عراقنا: Glad you liked it!
<hr />


<strong>
<a href="http://www.iraqni.com" rel="nofollow">????? ??????</a>
</strong>
on 2011-08-21 22:28:00 <br />
thank you the function is good
<hr />


<strong>
Raphael (Ao) RUDLER
</strong>
on 2009-06-17 20:55:15 <br />
works effectively better :)
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-06-08 02:18:54 <br />
Ok, came across a better trick than the already-pretty-safe negation I was using&#8230;Just use [\s\S] which allows a single character to be either a whitespace (including newilne) or non-whitespace&#8211;in other words anything&#8230;
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-06-08 02:02:45 <br />
Sorry, there had been several bugs in the latest versions of get_meta_tags() and file_get_contents() on which it depended. Those should all be fixed those now, so please use the latest copies for these. However, your own suggested fix will not work because that is no longer a regular expression and became instead a string (that text will no doubt never be found).

Explorer apparently has a problem if a negated character class in a regular expression is empty (e.g., [^]). We use a negated character because 1) We want to use something equivalent to the &quot;.&quot; (any character) until we reach the text after it that we do want, but&#8230; 2) we want to reach across multiple lines (and the &#8216;m&#8217; flag, does not, as is frequently supposed, do this). Although it doesn&#8217;t look like any character is explicitly forbidden in HTML (only XHTML), since we have to add some character, I added the null control character \u0000. If someone knows another better unlikely character or approach, let us know, but I think that should be a safe bet for now.

Thanks for reporting the issue.
<hr />


<strong>
<a href="- working on it" rel="nofollow">Raphael (Ao) RUDLER</a>
</strong>
on 2009-06-07 18:33:02 <br />
Hi, 

I noticed warnings under ie7 under vista for this function.
I had to replace :
<pre><code>fulltxt= this.file_get_contents(file).match(/^[^]*&lt;\/head&gt;/i);</code></pre>
by 
<pre><code>fulltxt= this.file_get_contents(file).match('/^[^]*&lt;\/head&gt;/i');</code></pre>

bytheway, thanks for all that work you made.
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/get_meta_tags/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/get_meta_tags/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/get_meta_tags/index.html';
        var disqus_url = 'http://phpjs.org/functions/get_meta_tags/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
