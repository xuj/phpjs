
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript ksort function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript ksort function A JavaScript equivalent of PHP&#8217;s ksort array/ksort.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/ksort/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <a target="_blank" href="https://github.com/kvz/phpjs">
    <img id="fork-us" style="position: fixed; z-index: 99; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>
  <header role="banner"><hgroup>
  <div id="logo">
    <h1><a href="/">php.js</a></h1>
  	<div class="clear"></div>
  </div>

  
    <h2><strong>A community effort to implement PHP functions in JavaScript</strong></h2>
  
  
    <h2>Learn how to do it in JavaScript. Explore boundaries. Use the functions that turn out to be great.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
  <li><a target="_blank" href="https://github.com/kvz/phpjs/wiki/_pages">Wiki</a></li>
  <li><a target="_blank"  href="http://twitter.com/phpjs">@phpjs</a></li>
  <li><a target="_blank"  href="http://identi.ca/brettz9">@brettz9</a></li>
  <li><a target="_blank"  href="http://twitter.com/kvz">@kvz</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript ksort function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s ksort</p>

<figure class='code'><figcaption><span>array/ksort.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/array/ksort.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">ksort</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">,</span> <span class="nx">sort_flags</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: GeekFG (http://geekfg.blogspot.com)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// %          note 1: The examples are correct, this is a new way</span>
</span><span class='line'>  <span class="c1">// %        note 2: This function deviates from PHP in returning a copy of the array instead</span>
</span><span class='line'>  <span class="c1">// %        note 2: of acting by reference and returning true; this was necessary because</span>
</span><span class='line'>  <span class="c1">// %        note 2: IE does not allow deleting and re-adding of properties without caching</span>
</span><span class='line'>  <span class="c1">// %        note 2: of property position; you can set the ini of &quot;phpjs.strictForIn&quot; to true to</span>
</span><span class='line'>  <span class="c1">// %        note 2: get the PHP behavior, but use this only if you are in an environment</span>
</span><span class='line'>  <span class="c1">// %        note 2: such as Firefox extensions where for-in iteration order is fixed and true</span>
</span><span class='line'>  <span class="c1">// %        note 2: property deletion is supported. Note that we intend to implement the PHP</span>
</span><span class='line'>  <span class="c1">// %        note 2: behavior by default if IE ever does allow it; only gives shallow copy since</span>
</span><span class='line'>  <span class="c1">// %        note 2: is by reference in PHP anyways</span>
</span><span class='line'>  <span class="c1">// %        note 3: Since JS objects&#39; keys are always strings, and (the</span>
</span><span class='line'>  <span class="c1">// %        note 3: default) SORT_REGULAR flag distinguishes by key type,</span>
</span><span class='line'>  <span class="c1">// %        note 3: if the content is a numeric string, we treat the</span>
</span><span class='line'>  <span class="c1">// %        note 3: &quot;original type&quot; as numeric.</span>
</span><span class='line'>  <span class="c1">// -    depends on: i18n_loc_get_default</span>
</span><span class='line'>  <span class="c1">// -    depends on: strnatcmp</span>
</span><span class='line'>  <span class="c1">// *     example 1: data = {d: &#39;lemon&#39;, a: &#39;orange&#39;, b: &#39;banana&#39;, c: &#39;apple&#39;};</span>
</span><span class='line'>  <span class="c1">// *     example 1: data = ksort(data);</span>
</span><span class='line'>  <span class="c1">// *     results 1: {a: &#39;orange&#39;, b: &#39;banana&#39;, c: &#39;apple&#39;, d: &#39;lemon&#39;}</span>
</span><span class='line'>  <span class="c1">// *     example 2: ini_set(&#39;phpjs.strictForIn&#39;, true);</span>
</span><span class='line'>  <span class="c1">// *     example 2: data = {2: &#39;van&#39;, 3: &#39;Zonneveld&#39;, 1: &#39;Kevin&#39;};</span>
</span><span class='line'>  <span class="c1">// *     example 2: ksort(data);</span>
</span><span class='line'>  <span class="c1">// *     results 2: data == {1: &#39;Kevin&#39;, 2: &#39;van&#39;, 3: &#39;Zonneveld&#39;}</span>
</span><span class='line'>  <span class="c1">// *     returns 2: true</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">tmp_arr</span> <span class="o">=</span> <span class="p">{},</span>
</span><span class='line'>    <span class="nx">keys</span> <span class="o">=</span> <span class="p">[],</span>
</span><span class='line'>    <span class="nx">sorter</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">strictForIn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">populateArr</span> <span class="o">=</span> <span class="p">{};</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">switch</span> <span class="p">(</span><span class="nx">sort_flags</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">case</span> <span class="s1">&#39;SORT_STRING&#39;</span><span class="o">:</span>
</span><span class='line'>    <span class="c1">// compare items as strings</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">that</span><span class="p">.</span><span class="nx">strnatcmp</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="k">case</span> <span class="s1">&#39;SORT_LOCALE_STRING&#39;</span><span class="o">:</span>
</span><span class='line'>    <span class="c1">// compare items as strings, based on the current locale (set with  i18n_loc_set_default() as of PHP6)</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">loc</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">i18n_loc_get_default</span><span class="p">();</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">i18nLocales</span><span class="p">[</span><span class="nx">loc</span><span class="p">].</span><span class="nx">sorting</span><span class="p">;</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="k">case</span> <span class="s1">&#39;SORT_NUMERIC&#39;</span><span class="o">:</span>
</span><span class='line'>    <span class="c1">// compare items numerically</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">((</span><span class="nx">a</span> <span class="o">+</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">b</span> <span class="o">+</span> <span class="mi">0</span><span class="p">));</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="c1">// case &#39;SORT_REGULAR&#39;: // compare items normally (don&#39;t change types)</span>
</span><span class='line'>  <span class="k">default</span><span class="o">:</span>
</span><span class='line'>    <span class="nx">sorter</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">aFloat</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span>
</span><span class='line'>        <span class="nx">bFloat</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span>
</span><span class='line'>        <span class="nx">aNumeric</span> <span class="o">=</span> <span class="nx">aFloat</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span> <span class="o">===</span> <span class="nx">a</span><span class="p">,</span>
</span><span class='line'>        <span class="nx">bNumeric</span> <span class="o">=</span> <span class="nx">bFloat</span> <span class="o">+</span> <span class="s1">&#39;&#39;</span> <span class="o">===</span> <span class="nx">b</span><span class="p">;</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">aNumeric</span> <span class="o">&amp;&amp;</span> <span class="nx">bNumeric</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">aFloat</span> <span class="o">&gt;</span> <span class="nx">bFloat</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">aFloat</span> <span class="o">&lt;</span> <span class="nx">bFloat</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">aNumeric</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">bNumeric</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">aNumeric</span> <span class="o">&amp;&amp;</span> <span class="nx">bNumeric</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">b</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'>    <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Make a list of key names</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">inputArr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">k</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">keys</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">sorter</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// BEGIN REDUNDANT</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>  <span class="c1">// END REDUNDANT</span>
</span><span class='line'>  <span class="nx">strictForIn</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">].</span><span class="nx">local_value</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">].</span><span class="nx">local_value</span> <span class="o">!==</span> <span class="s1">&#39;off&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">populateArr</span> <span class="o">=</span> <span class="nx">strictForIn</span> <span class="o">?</span> <span class="nx">inputArr</span> <span class="o">:</span> <span class="nx">populateArr</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// Rebuild array with sorted key names</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">k</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span class='line'>    <span class="nx">tmp_arr</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">inputArr</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">strictForIn</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">delete</span> <span class="nx">inputArr</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="k">in</span> <span class="nx">tmp_arr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">tmp_arr</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">populateArr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tmp_arr</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">strictForIn</span> <span class="o">||</span> <span class="nx">populateArr</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/array/ksort.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/array/ksort.js">edit on github</a></li>
</ul>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="o">:</span> <span class="s1">&#39;van&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="o">:</span> <span class="s1">&#39;Zonneveld&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="o">:</span> <span class="s1">&#39;Kevin&#39;</span><span class="p">};</span>
</span><span class='line'><span class="nx">ksort</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the array extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/array">array</a></li>
<li><a href="/functions/array_change_key_case">array_change_key_case</a></li>
<li><a href="/functions/array_chunk">array_chunk</a></li>
<li><a href="/functions/array_combine">array_combine</a></li>
<li><a href="/functions/array_count_values">array_count_values</a></li>
<li><a href="/functions/array_diff">array_diff</a></li>
<li><a href="/functions/array_diff_assoc">array_diff_assoc</a></li>
<li><a href="/functions/array_diff_key">array_diff_key</a></li>
<li><a href="/functions/array_diff_uassoc">array_diff_uassoc</a></li>
<li><a href="/functions/array_diff_ukey">array_diff_ukey</a></li>
<li><a href="/functions/array_fill">array_fill</a></li>
<li><a href="/functions/array_fill_keys">array_fill_keys</a></li>
<li><a href="/functions/array_filter">array_filter</a></li>
<li><a href="/functions/array_flip">array_flip</a></li>
<li><a href="/functions/array_intersect">array_intersect</a></li>
<li><a href="/functions/array_intersect_assoc">array_intersect_assoc</a></li>
<li><a href="/functions/array_intersect_key">array_intersect_key</a></li>
<li><a href="/functions/array_intersect_uassoc">array_intersect_uassoc</a></li>
<li><a href="/functions/array_intersect_ukey">array_intersect_ukey</a></li>
<li><a href="/functions/array_key_exists">array_key_exists</a></li>
<li><a href="/functions/array_keys">array_keys</a></li>
<li><a href="/functions/array_map">array_map</a></li>
<li><a href="/functions/array_merge">array_merge</a></li>
<li><a href="/functions/array_merge_recursive">array_merge_recursive</a></li>
<li><a href="/functions/array_multisort">array_multisort</a></li>
<li><a href="/functions/array_pad">array_pad</a></li>
<li><a href="/functions/array_pop">array_pop</a></li>
<li><a href="/functions/array_product">array_product</a></li>
<li><a href="/functions/array_push">array_push</a></li>
<li><a href="/functions/array_rand">array_rand</a></li>
<li><a href="/functions/array_reduce">array_reduce</a></li>
<li><a href="/functions/array_replace">array_replace</a></li>
<li><a href="/functions/array_replace_recursive">array_replace_recursive</a></li>
<li><a href="/functions/array_reverse">array_reverse</a></li>
<li><a href="/functions/array_search">array_search</a></li>
<li><a href="/functions/array_shift">array_shift</a></li>
<li><a href="/functions/array_slice">array_slice</a></li>
<li><a href="/functions/array_splice">array_splice</a></li>
<li><a href="/functions/array_sum">array_sum</a></li>
<li><a href="/functions/array_udiff">array_udiff</a></li>
<li><a href="/functions/array_udiff_assoc">array_udiff_assoc</a></li>
<li><a href="/functions/array_udiff_uassoc">array_udiff_uassoc</a></li>
<li><a href="/functions/array_uintersect">array_uintersect</a></li>
<li><a href="/functions/array_uintersect_assoc">array_uintersect_assoc</a></li>
<li><a href="/functions/array_uintersect_uassoc">array_uintersect_uassoc</a></li>
<li><a href="/functions/array_unique">array_unique</a></li>
<li><a href="/functions/array_unshift">array_unshift</a></li>
<li><a href="/functions/array_values">array_values</a></li>
<li><a href="/functions/array_walk">array_walk</a></li>
<li><a href="/functions/array_walk_recursive">array_walk_recursive</a></li>
<li><a href="/functions/arsort">arsort</a></li>
<li><a href="/functions/asort">asort</a></li>
<li><a href="/functions/compact">compact</a></li>
<li><a href="/functions/count">count</a></li>
<li><a href="/functions/current">current</a></li>
<li><a href="/functions/each">each</a></li>
<li><a href="/functions/end">end</a></li>
<li><a href="/functions/extract">extract</a></li>
<li><a href="/functions/in_array">in_array</a></li>
<li><a href="/functions/key">key</a></li>
<li><a href="/functions/krsort">krsort</a></li>
<li><a href="/functions/ksort">ksort</a></li>
<li><a href="/functions/natcasesort">natcasesort</a></li>
<li><a href="/functions/natsort">natsort</a></li>
<li><a href="/functions/next">next</a></li>
<li><a href="/functions/pos">pos</a></li>
<li><a href="/functions/prev">prev</a></li>
<li><a href="/functions/range">range</a></li>
<li><a href="/functions/reset">reset</a></li>
<li><a href="/functions/rsort">rsort</a></li>
<li><a href="/functions/shuffle">shuffle</a></li>
<li><a href="/functions/sizeof">sizeof</a></li>
<li><a href="/functions/sort">sort</a></li>
<li><a href="/functions/uasort">uasort</a></li>
<li><a href="/functions/uksort">uksort</a></li>
<li><a href="/functions/usort">usort</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://brett-zamir.me" rel="nofollow">Brett Zamir</a>
</strong>
on 2010-09-25 17:46:19 <br />
@Lazy eyes: Thanks for the input! Fixed in Git. The problem was/is that while the default flag, SORT_REGULAR in PHP, by relying on original type, is able to distinguish numbers from strings, while in JS, using an object to simulate associative arrays, leads to the issue that all object keys being strings. I&#8217;ve now changed SORT_REGULAR to assume that any numeric string gets treated as though its original type were numeric. If you want to always treat as strings, or always treat as numbers, you can choose from the different flags instead.
<hr />


<strong>
Lazy eyes
</strong>
on 2010-09-24 14:38:07 <br />
I&#8217;ve got a set of keys

<pre><code>
[1000000] =&gt; 1
[1100000] =&gt; 1
[850000] =&gt; 5
[880000] =&gt; 2
[890000] =&gt; 4
</code></pre>

it doesn&#8217;t seem to work with different key lengths? Any fix for this?
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2010-06-19 16:22:07 <br />
@ ALastorZ: We won&#8217;t include it as it isn&#8217;t a PHP feature, but you make a good point as I think PHP doesn&#8217;t care for strings when doing a SORT_NUMERIC. Fixed: https://github.com/kvz/phpjs/commit/c175338a592db72bc4140627c9b044702ceed26a
<hr />


<strong>
ALastorZ
</strong>
on 2010-05-31 16:41:04 <br />
I&#8217;ve needed this useful addition:

<pre><code>

    case 'SORT_STRNUMERIC': // compare items by first number in string
            sorter = function (a, b) {
                a = Number(String(a).match(/(\d*)/)[1]);
                b = Number(String(b).match(/(\d*)/)[1]);
                return (a - b);
            };
            break;

</code></pre>   
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-18 04:21:16 <br />
No, no steroids, but maybe the (healthy) mental equivalent&#8230; I was having come concentration problems, and my doctor had blood tests done which showed a borderline B12 deficiency. I started taking LIQUID vitamin B12 (16,666% percent of RDA!) and it has increased my mental endurance enormously. I&#8217;ve taken vitamin B6 in the past which very significantly helps my atrocious working/auditory memory, but I have to find the right balance, or otherwise, daily B6 in the regular dose really does have a counterproductive effect for me (not for B12 apparently in my experience). 

A better solution to the latter problem has been DHA (in omega-3 fatty acids, especially fish oil), and that has also been just awesome for working memory (though I think it can be a little dehydrating to take it every day). I really think there are inadequacies in our food supply, with current farming practices only replenishing the soil with the nutrients needed for mere growth (like nitrogen), from what I&#8217;ve heard. 

Just heard a TV special about how a particularly long-lived group of Asians lived longer due to vitamins in their soil or something (the special was in Chinese (I&#8217;m living in China), and my Chinese is still just so-so).

Now how&#8217;s that for really off-topic?
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-01-14 11:55:24 <br />
@ Brett Zamir: Added! You&#8217;re on steroids or something? ;)
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-14 04:10:49 <br />
Lastly for now (I hope), sort() and rsort() (and usort()) need to be changed along the lines of asort() (and uasort()) to allow object sorting&#8230;
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-14 04:03:14 <br />
Sorry, I guess that wasn&#8217;t all. You can also get arsort() by changing this line in asort():

<pre><code>if (inputArr[j+1] &amp;lt; inputArr[j]) {</code></pre>

to

<pre><code>if (inputArr[j+1] &amp;gt; inputArr[j]) {</code></pre>

And we can also trivially get usort() and uksort() by changing sort flags in the corresponding functions to callbacks (uasort() would not be as easy though, since my version presently depends on the sorter for internal uses as well):

<pre><code>function usort( array, sorter ) {
    if (typeof sorter === 'string') {
        sorter = window[sorter];
    }
    if (sorter !== false) {
        array.sort(sorter);
    } else {
        array.sort();
    }   
    return true;
}
</code></pre>

and

<pre><code>function uksort(array, sorter) {
    if (typeof sorter === 'string') {
        sorter = window[sorter];
    }

    var tmp_arr = {}, keys = [];
        
    // Make a list of key names
    for (var key in array) { 
        keys.push(key);
    }
     
    // Sort key names
    try {
        if (sorter) {
            keys.sort(sorter);
        } else {
            keys.sort();
        }
    }
    catch (e) {
        return false;
    }
    
    // Rebuild array with sorted key names
    for (var i = 0; i &amp;lt; keys.length; i++) {
        key = keys[i];
        tmp_arr[key] = array[key]; 
        delete array[key];
    } 
    for (i in tmp_arr) {
        array[i] = tmp_arr[i]
    }
    return true; 
}

var arr =  {&amp;quot;d&amp;quot; : &amp;quot;lemon&amp;quot;,  &amp;quot;a&amp;quot; : &amp;quot;orange&amp;quot;, &amp;quot;b&amp;quot; : &amp;quot;banana&amp;quot;, &amp;quot;c&amp;quot; : &amp;quot;apple&amp;quot;};
uksort(arr, function (a, b) {
            if (a &amp;gt; b) return 1;
            if (b &amp;lt; a) return -1;
            return 0;
        });
</code></pre>

The only other array functions left (besides uasort() as mentioned above) now are natsort, natcasesort, and array_multisort. (Of course, we have to still support the flags on the existing ones, etc.)
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-14 03:40:31 <br />
Lastly, while it looks like your other sort functions are fine, krsort() does need to be changed too. For that, you can use the ksort() I sent two posts before with the line &amp;quot;keys.reverse();&amp;quot; added after the try-catch block.
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-14 03:27:02 <br />
Whoops, sorry the function just given works, but the example doesn&#8217;t! (I was playing around with the values and forgot to switch back). The example section should be:

<pre><code>$fruits = {&amp;quot;d&amp;quot; : &amp;quot;lemon&amp;quot;,  &amp;quot;a&amp;quot; : &amp;quot;orange&amp;quot;, &amp;quot;b&amp;quot; : &amp;quot;banana&amp;quot;, &amp;quot;c&amp;quot; : &amp;quot;apple&amp;quot;};
asort($fruits); 
var $output = '';
for (var $key in $fruits) {
    $val = $fruits[$key];
    $output += $key+' = '+$val+&amp;quot;\n&amp;quot;;
}
alert($output);
/*
c = apple
b = banana
d = lemon
a = orange
*/
</code></pre>
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-14 03:24:14 <br />
I also used the same basic approach just mentioned in this asort() as well, but I needed a slightly different approach since I could not rely on values being unique, as keys were for ksort().

<pre><code>function asort (inputArr) {
    function bubbleSort(keyArr, inputArr) {
        for (var i = inputArr.length-2; i &amp;gt;= 0; i--) {
            for (var j=0; j &amp;lt;= i; j++) {
                if (inputArr[j+1] &amp;lt; inputArr[j]) {
                    var tempValue = inputArr[j];
                    inputArr[j] = inputArr[j+1];
                    inputArr[j+1] = tempValue;
                    var tempKeyVal = keyArr[j];
                    keyArr[j] = keyArr[j+1];
                    keyArr[j+1] = tempKeyVal;
                }
            }
        }
    }
    var valArr = [], keyArr=[];
    for (var k in inputArr) { // Get key and value arrays
        valArr.push(inputArr[k]);
        keyArr.push(k);
        delete inputArr[k] ;
    }
    try {
        bubbleSort(keyArr, valArr); // Sort our new temporary arrays
    }
    catch(e) {
        return false;
    }
    for (i=0; i &amp;lt; valArr.length; i++) { // Repopulate the old array
        inputArr[keyArr[i]] = valArr[i];
    }
    return true;
}
$fruits = {&amp;quot;d&amp;quot; : &amp;quot;lemon&amp;quot;,  &amp;quot;a&amp;quot; : &amp;quot;orange&amp;quot;, &amp;quot;b&amp;quot; : &amp;quot;orange&amp;quot;, &amp;quot;c&amp;quot; : &amp;quot;orange&amp;quot;};
asort($fruits); 
var $output = '';
for (var $key in $fruits) {
    $val = $fruits[$key];
    $output += $key+' = '+$val+&amp;quot;\n&amp;quot;;
}
alert($output);
/*
c = apple
b = banana
d = lemon
a = orange
*/
</code></pre>
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-01-14 02:55:24 <br />
Hi,

I don&#8217;t think that this function is working. The last line does not replace the array, since in JavaScript, as a whole object, the arrays (though their values are passed in by reference), are passed in by value (you cannot, for example, reassign or delete the passed-in array as a whole). 

You can confirm this with something like this:

<pre><code>function changeArr (arr) {
    arr = [3, 2, 1];
}
var a = [1, 2, 3];
changeArr(a);
alert(a); // still 1, 2, 3</code></pre>


However, you can delete and then rebuild its contents, modifying the function as such:

<pre><code>function ksort(array, sort_flags) {
    // http://kevin.vanzonneveld.net
    // +   original by: GeekFG (http://geekfg.blogspot.com)
    // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)
    // %          note: The examples are correct, this is a new way
    // *     example 1: data = {2: 'van', 3: 'Zonneveld', 1: 'Kevin'}; 
    // *     example 1: ksort(data);
    // *     results 1: data == {1: 'Kevin', 2: 'van', 3: 'Zonneveld'}
    // *     returns 1: true
    
    var tmp_arr = {}, keys = [], sorter = false;
    
    // For now only SORT_NUMERIC has a custom sorter
    // and SORT_REGULAR, SORT_STRING, and SORT_LOCALE_STRING
    // are all handled with the default sorter 
    if (sort_flags == 'SORT_NUMERIC') {
        sorter = function (a, b) {
            return(a - b);
        };
    }
    
    // Make a list of key names
    for (var key in array) { 
        keys.push(key);
    }
     
    // Sort key names
    try {
        if (sorter !== false) {
            keys.sort(sorter);
        } else {
            keys.sort();
        }
    }
    catch (e) {
        return false;
    }
    
    // Rebuild array with sorted key names
    for (var i = 0; i &amp;lt; keys.length; i++) {
        key = keys[i];
        tmp_arr[key] = array[key]; 
        delete array[key];
    } 
    for (i in tmp_arr) {
        array[i] = tmp_arr[i]
    }
    return true; 
}</code></pre>
<hr />


<strong>
Abhijeet Bagul
</strong>
on 2008-07-29 07:02:35 <br />
Your all functions are nice&#8230;

It really helped me lot.
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/ksort/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/ksort/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/ksort/index.html';
        var disqus_url = 'http://phpjs.org/functions/ksort/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
