
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>JavaScript shuffle function - php.js</title>
  <meta name="author" content="Kevin van Zonneveld">

  
  <meta name="description" content="JavaScript shuffle function A JavaScript equivalent of PHP&#8217;s shuffle array/shuffle.js raw on github 1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://phpjs.org/functions/shuffle/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="php.js" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-63083-7']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="no-sidebar"  >
  <a target="_blank" href="https://github.com/kvz/phpjs">
    <img id="fork-us" style="position: fixed; z-index: 99; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub">
  </a>
  <header role="banner"><hgroup>
  <div id="logo">
    <h1><a href="/">php.js</a></h1>
  	<div class="clear"></div>
  </div>

  
  
    <h2>Learn how to do it in JavaScript. Explore boundaries porting languages. Enjoy functions that turn out to be useful.</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:phpjs.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about">About</a></li>
  <li><a href="/blog/archives">Blog</a></li>
  <li><a href="/functions">Functions</a></li>
  <li><a href="/authors">Authors</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">JavaScript shuffle function</h1>
    
  </header>
  
  <!-- Generated by Rakefile:build -->


<p>A JavaScript equivalent of PHP&#8217;s shuffle</p>

<figure class='code'><figcaption><span>array/shuffle.js </span><a href='https://raw.github.com/kvz/phpjs/master/functions/array/shuffle.js'>raw on github </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">function</span> <span class="nx">shuffle</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// http://kevin.vanzonneveld.net</span>
</span><span class='line'>  <span class="c1">// +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)</span>
</span><span class='line'>  <span class="c1">// +    revised by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)</span>
</span><span class='line'>  <span class="c1">// +    revised by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// +   improved by: Brett Zamir (http://brett-zamir.me)</span>
</span><span class='line'>  <span class="c1">// %        note 1: This function deviates from PHP in returning a copy of the array instead</span>
</span><span class='line'>  <span class="c1">// %        note 1: of acting by reference and returning true; this was necessary because</span>
</span><span class='line'>  <span class="c1">// %        note 1: IE does not allow deleting and re-adding of properties without caching</span>
</span><span class='line'>  <span class="c1">// %        note 1: of property position; you can set the ini of &quot;phpjs.strictForIn&quot; to true to</span>
</span><span class='line'>  <span class="c1">// %        note 1: get the PHP behavior, but use this only if you are in an environment</span>
</span><span class='line'>  <span class="c1">// %        note 1: such as Firefox extensions where for-in iteration order is fixed and true</span>
</span><span class='line'>  <span class="c1">// %        note 1: property deletion is supported. Note that we intend to implement the PHP</span>
</span><span class='line'>  <span class="c1">// %        note 1: behavior by default if IE ever does allow it; only gives shallow copy since</span>
</span><span class='line'>  <span class="c1">// %        note 1: is by reference in PHP anyways</span>
</span><span class='line'>  <span class="c1">// *     example 1: ini_set(&#39;phpjs.strictForIn&#39;, true);</span>
</span><span class='line'>  <span class="c1">// *     example 1: shuffle({5:&#39;a&#39;, 2:&#39;3&#39;, 3:&#39;c&#39;, 4:5, &#39;q&#39;:5});</span>
</span><span class='line'>  <span class="c1">// *     returns 1: {5:&#39;a&#39;, 4:5, &#39;q&#39;:5, 3:&#39;c&#39;, 2:&#39;3&#39;}</span>
</span><span class='line'>  <span class="c1">// *     example 2: ini_set(&#39;phpjs.strictForIn&#39;, true);</span>
</span><span class='line'>  <span class="c1">// *     example 2: var data = {5:&#39;a&#39;, 2:&#39;3&#39;, 3:&#39;c&#39;, 4:5, &#39;q&#39;:5};</span>
</span><span class='line'>  <span class="c1">// *     example 2: shuffle(data);</span>
</span><span class='line'>  <span class="c1">// *     results 2: {5:&#39;a&#39;, &#39;q&#39;:5, 3:&#39;c&#39;, 2:&#39;3&#39;, 4:5}</span>
</span><span class='line'>  <span class="c1">// *     returns 2: true</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">valArr</span> <span class="o">=</span> <span class="p">[],</span>
</span><span class='line'>    <span class="nx">k</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">strictForIn</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">populateArr</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">inputArr</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Get key and value arrays</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nx">inputArr</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">k</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">valArr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">inputArr</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="nx">strictForIn</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">delete</span> <span class="nx">inputArr</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="nx">valArr</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// BEGIN REDUNDANT</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>  <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span> <span class="o">||</span> <span class="p">{};</span>
</span><span class='line'>  <span class="c1">// END REDUNDANT</span>
</span><span class='line'>  <span class="nx">strictForIn</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">].</span><span class="nx">local_value</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">php_js</span><span class="p">.</span><span class="nx">ini</span><span class="p">[</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">].</span><span class="nx">local_value</span> <span class="o">!==</span> <span class="s1">&#39;off&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="nx">populateArr</span> <span class="o">=</span> <span class="nx">strictForIn</span> <span class="o">?</span> <span class="nx">inputArr</span> <span class="o">:</span> <span class="nx">populateArr</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">valArr</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// Repopulate the old array</span>
</span><span class='line'>    <span class="nx">populateArr</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">valArr</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="nx">strictForIn</span> <span class="o">||</span> <span class="nx">populateArr</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><a href="https://github.com/kvz/phpjs/blob/master/functions/array/shuffle.js">view on github</a></li>
<li><a href="https://github.com/kvz/phpjs/edit/master/functions/array/shuffle.js">edit on github</a></li>
</ul>


<h3>Example 1</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'><span class="nx">shuffle</span><span class="p">({</span><span class="mi">5</span><span class="o">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="o">:</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="o">:</span><span class="mi">5</span><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="p">{</span><span class="mi">5</span><span class="o">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="o">:</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="s1">&#39;3&#39;</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Example 2</h3>

<p>This code</p>

<figure class='code'><figcaption><span>example </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">ini_set</span><span class="p">(</span><span class="s1">&#39;phpjs.strictForIn&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="mi">5</span><span class="o">:</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="o">:</span><span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="o">:</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="o">:</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="o">:</span><span class="mi">5</span><span class="p">};</span>
</span><span class='line'><span class="nx">shuffle</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Should return</p>

<figure class='code'><figcaption><span>returns </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kc">true</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Other PHP functions in the array extension</h3>

<!-- Generated by Rakefile:build -->


<ul>
<li><a href="/functions/array">array</a></li>
<li><a href="/functions/array_change_key_case">array_change_key_case</a></li>
<li><a href="/functions/array_chunk">array_chunk</a></li>
<li><a href="/functions/array_combine">array_combine</a></li>
<li><a href="/functions/array_count_values">array_count_values</a></li>
<li><a href="/functions/array_diff">array_diff</a></li>
<li><a href="/functions/array_diff_assoc">array_diff_assoc</a></li>
<li><a href="/functions/array_diff_key">array_diff_key</a></li>
<li><a href="/functions/array_diff_uassoc">array_diff_uassoc</a></li>
<li><a href="/functions/array_diff_ukey">array_diff_ukey</a></li>
<li><a href="/functions/array_fill">array_fill</a></li>
<li><a href="/functions/array_fill_keys">array_fill_keys</a></li>
<li><a href="/functions/array_filter">array_filter</a></li>
<li><a href="/functions/array_flip">array_flip</a></li>
<li><a href="/functions/array_intersect">array_intersect</a></li>
<li><a href="/functions/array_intersect_assoc">array_intersect_assoc</a></li>
<li><a href="/functions/array_intersect_key">array_intersect_key</a></li>
<li><a href="/functions/array_intersect_uassoc">array_intersect_uassoc</a></li>
<li><a href="/functions/array_intersect_ukey">array_intersect_ukey</a></li>
<li><a href="/functions/array_key_exists">array_key_exists</a></li>
<li><a href="/functions/array_keys">array_keys</a></li>
<li><a href="/functions/array_map">array_map</a></li>
<li><a href="/functions/array_merge">array_merge</a></li>
<li><a href="/functions/array_merge_recursive">array_merge_recursive</a></li>
<li><a href="/functions/array_multisort">array_multisort</a></li>
<li><a href="/functions/array_pad">array_pad</a></li>
<li><a href="/functions/array_pop">array_pop</a></li>
<li><a href="/functions/array_product">array_product</a></li>
<li><a href="/functions/array_push">array_push</a></li>
<li><a href="/functions/array_rand">array_rand</a></li>
<li><a href="/functions/array_reduce">array_reduce</a></li>
<li><a href="/functions/array_replace">array_replace</a></li>
<li><a href="/functions/array_replace_recursive">array_replace_recursive</a></li>
<li><a href="/functions/array_reverse">array_reverse</a></li>
<li><a href="/functions/array_search">array_search</a></li>
<li><a href="/functions/array_shift">array_shift</a></li>
<li><a href="/functions/array_slice">array_slice</a></li>
<li><a href="/functions/array_splice">array_splice</a></li>
<li><a href="/functions/array_sum">array_sum</a></li>
<li><a href="/functions/array_udiff">array_udiff</a></li>
<li><a href="/functions/array_udiff_assoc">array_udiff_assoc</a></li>
<li><a href="/functions/array_udiff_uassoc">array_udiff_uassoc</a></li>
<li><a href="/functions/array_uintersect">array_uintersect</a></li>
<li><a href="/functions/array_uintersect_assoc">array_uintersect_assoc</a></li>
<li><a href="/functions/array_uintersect_uassoc">array_uintersect_uassoc</a></li>
<li><a href="/functions/array_unique">array_unique</a></li>
<li><a href="/functions/array_unshift">array_unshift</a></li>
<li><a href="/functions/array_values">array_values</a></li>
<li><a href="/functions/array_walk">array_walk</a></li>
<li><a href="/functions/array_walk_recursive">array_walk_recursive</a></li>
<li><a href="/functions/arsort">arsort</a></li>
<li><a href="/functions/asort">asort</a></li>
<li><a href="/functions/compact">compact</a></li>
<li><a href="/functions/count">count</a></li>
<li><a href="/functions/current">current</a></li>
<li><a href="/functions/each">each</a></li>
<li><a href="/functions/end">end</a></li>
<li><a href="/functions/extract">extract</a></li>
<li><a href="/functions/in_array">in_array</a></li>
<li><a href="/functions/key">key</a></li>
<li><a href="/functions/krsort">krsort</a></li>
<li><a href="/functions/ksort">ksort</a></li>
<li><a href="/functions/natcasesort">natcasesort</a></li>
<li><a href="/functions/natsort">natsort</a></li>
<li><a href="/functions/next">next</a></li>
<li><a href="/functions/pos">pos</a></li>
<li><a href="/functions/prev">prev</a></li>
<li><a href="/functions/range">range</a></li>
<li><a href="/functions/reset">reset</a></li>
<li><a href="/functions/rsort">rsort</a></li>
<li><a href="/functions/shuffle">shuffle</a></li>
<li><a href="/functions/sizeof">sizeof</a></li>
<li><a href="/functions/sort">sort</a></li>
<li><a href="/functions/uasort">uasort</a></li>
<li><a href="/functions/uksort">uksort</a></li>
<li><a href="/functions/usort">usort</a></li>
</ul>


<h2>Legacy comments</h2>

<p>These were imported from our old site. Please use disqus below for new comments</p>

<div style="overflow-y: scroll; max-height: 500px;">
<!-- Generated by Rakefile:build -->

<strong>
<a href="http://an3m1.com/" rel="nofollow">????? ???</a>
</strong>
on 2012-04-11 15:35:33 <br />
I have a lot to benefit from this article and thank you for this wonderful effort to this article and will continue my many articles you have other
 
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-02-11 02:16:12 <br />
@ Brett Zamir: Well in that case my previous comment about keeping it modest, noninterfereering &amp;amp; well commented apply ;)
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-02-04 13:42:49 <br />
@Kevin Np&#8230; Was just wondering if I could add such things to the functions in the meantime. I wouldn&#8217;t expect you to need to do anything with them unless you wanted to at some point. Just thought it might be good to start such a convention sooner rather than later&#8230;
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-02-04 12:15:55 <br />
@ Brett Zamir: Oh, No, I&#8217;m sorry I didn&#8217;t get that in the first place. We would have to work on the compiler for that.
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-02-03 01:32:35 <br />
Sorry if I wasn&#8217;t clear.

In JavaScript, you can get private static variables, by putting them within:

<pre><code>
(function() {
...
})();</code></pre>

&#8230;as your namespaced version does. Everything within that block will only be local to that anonymous function&#8211;unless globals are referenced (which my suggestion didn&#8217;t do&#8211;I just meant that the timezone variable, etc. would be &amp;quot;global&amp;quot; in the sense of being available to the other PHP functions within the block&#8211;not to user code). The only global that should be within that block is this line which assigns the PHP_JS object to the global $P:

<pre><code>window.$P = PHP_JS();</code></pre>

The other variables not defined within PHP_JS, like &amp;quot;timezone&amp;quot; will still be accessible to PHP_JS (i.e., to any code within the anonymous function), but not to any outside user code.

So, it is perfectly safe, and also promotes speed and memory use.

Try it with a simpler example like this:

<pre><code>(function() {
    // Private
    var stat = 'PrivateStaticValue';
    // Global assignment
    window.myGlobal = 'my'+stat; // To be useful, this could return something more complicated like a public function or object
})();

alert(myGlobal); // myPrivateStaticValue
alert(stat); // &amp;quot;stat is not defined&amp;quot; error
</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-02-02 23:32:03 <br />
@ Brett Zamir: I think the whole point of having a  namespaced version is that it can&#8217;t possible conflict with other components of an application. Having such variables is thus defeating it&#8217;s purpose.

And you know how I feel about adding global dependencies to php.js in general.

I think the gain does not justify the cost in this case.
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-02-02 12:02:17 <br />
Ok sure, thanks. I added a comment at array_pop().

One other customizability feature I thought of would be making a comment block, to indicate code which can be made static, and thus not be rebuilt into memory each time a function is called. If we get date() working with timezones, for example, this could be a pretty big array. If we do something like this:

<pre><code>/*Begin static*/
var timezones = ['Azores', etc.];
/*End static*/
// Use timezones in the rest of the function
</code></pre>

&#8230;the namespaced version could be automated to move such text blocks into the top of the namespacing function for reuse within all of the functions:

<pre><code>(function() {

var timezones = ['Azores', etc.]; // This is only &amp;quot;global&amp;quot; inside this namespacing--it will not become a real global

var PHP_JS = function() {
...
};
PHP_JS.prototype = {
    date : function () {
        // use timezones var
    }
    // Other date functions can also reuse too (though making a variable like timezones static is useful even if only one function uses it, given its size upon each execution)...
...
};

window.$P = PHP_JS();
})();
</code></pre>

This should help with memory and speed, and solve the problem of keeping things both potentially independent and as part of a package&#8230;
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-02-02 10:25:36 <br />
@ Brett Zamir: I&#8217;m OK with it if you add such a property if it allows for other projects to more easily extend on our functionality. Just keep it modest and add a clear comment as to what purpose it serves plz. Just did array_pop BTW.
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-02-02 03:10:18 <br />
There are just 4 more by-reference array functions (array_ pop/push/shift/unshift)&#8211;harder ones to fix&#8211;which need to be fixed to support objects and arrays, but there were a good number more that also need fixing. 

By the way, these functions also show desirability of configurability, I think, because the default behavior of PHP is to reindex any arrays with numerical indexes (even array_push() !) which doesn&#8217;t seem so useful to me. 

Would you be open to my allowing a property on the function itself to be used for configuration (which in the future could be controlled by a global package as well). This doesn&#8217;t really pollute anything. I think I already did this with each() or something like that.

e.g.,

array_pop.preserveNumericalIndices = true;

This isn&#8217;t altering the arrays themselves or any user data&#8211;just our own functions (something which users probably wouldn&#8217;t be iterating, and if they were, it certainly isn&#8217;t PHP behavior)&#8230; Of course, the default behavior would be mimicking PHP as much as possible&#8230;
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2009-02-01 23:12:44 <br />
@ Brett Zamir: Brilliant! We&#8217;re steadily moving to a 100% associative aware PHP.JS :D
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-02-01 09:36:16 <br />
Sorry, realized there were a few variable declarations left in there that we don&#8217;t need in this function:

<pre><code>function shuffle( inputArr ) {
    var valArr = [];
    var k = '', i = 0;
    
    for (k in inputArr) { // Get key and value arrays
        valArr.push(inputArr[k]);
        delete inputArr[k] ;
    }
    valArr.sort(function() {return 0.5 - Math.random();});
 
    for (i = 0; i &amp;lt; valArr.length; i++) { // Repopulate the old array
        inputArr[i] = valArr[i];
    }
    return true;
}</code></pre>
<hr />


<strong>
<a href="http://bahai-library.com" rel="nofollow">Brett Zamir</a>
</strong>
on 2009-02-01 09:33:24 <br />
Here&#8217;s an update which gets shuffle() to also work with associative arrays:

<pre><code>var a  = {5:'a', 2:'3', 3:'c', 4:5, 'q':5}
shuffle(a);

function shuffle( inputArr ) {
    var valArr = [], keyArr=[];
    var k = '', i = 0, sorter = false;
    
    for (k in inputArr) { // Get key and value arrays
        valArr.push(inputArr[k]);
        delete inputArr[k] ;
    }
    valArr.sort(function() {return 0.5 - Math.random();});
 
    for (i = 0; i &amp;lt; valArr.length; i++) { // Repopulate the old array
        inputArr[i] = valArr[i];
    }
    return true;
}</code></pre>
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-04-13 12:58:55 <br />
@ Jonas Raoni: Generally speaking I agree that it does. But in this project the goal is to really stay true to PHP behavior so you can use these functions as building blocks for bigger projects without producing unexpected behavior. We don&#8217;t want people to have to debug their projects, and ultimately reach the conclusion that it was because php.js returned a different result than expected. If it currently does in some places it is because of bugs or a lack of time or knowledge to implement it fully compliant. But I feel we should at least not implement different output by design.

This is one of the reasons we made php.js namespaced though. It allows people to adjust the behavior of specific functions more easily.
<hr />


<strong>
Jonas Raoni
</strong>
on 2008-04-12 20:18:27 <br />
You can pass as reference indeed, all JavaScript *objects* are passed as reference. But in my version I really preferred to return the array itself, it makes more sense.

var x = new Array(1,2,3,4);
shuffle(x);
alert(x);
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-03-02 11:47:31 <br />
@ Michael White: Hi Michael, you can actually pass by reference in javascript, just by using the name of the original parameter. 

So in this case onfortunately I can not agree with your comment. As long as we can, we should stay true to PHP, to keep the original documentation compatible and to reduce the risk of unexpected behavior leading to bugs in actual programs based on this library. But thanks anyway for your input! If you disagree still, let me know.
<hr />


<strong>
Michael White
</strong>
on 2008-03-02 06:06:03 <br />
<pre><code>
// This function should actually return the array since you cannot pass by reference in JavaScript.
//This way, when you pass it an array that is not in the global namespace you are still able to retrieve the final array.

//return true;
return array;
</code></pre>

http://crestidg.com
<hr />


<strong>
<a href="http://kevin.vanzonneveld.net" rel="nofollow">Kevin van Zonneveld</a>
</strong>
on 2008-03-02 00:03:58 <br />
@ Karel Macek: Though this is code originially by Jonas Raoni Soares Silva, I don&#8217;t see why not? Enlighten me if you will.
<hr />


<strong>
Karel Macek
</strong>
on 2008-03-01 22:38:57 <br />
Great!

&#8230;nevertheless, are you sure that each permutation is of equal probability?
<hr />


</div>


  
    <footer>
      
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://phpjs.org/functions/shuffle/index.html" data-via="phpjs" data-counturl="http://phpjs.org/functions/shuffle/index.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Kevin van Zonneveld -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
   -
  <span class="credit">Theme by <a href="http://melandri.net/2012/07/23/darkstripes-octopress-theme-released/">alessandro melandri</a></span>
</p>
</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'phpjs';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://phpjs.org/functions/shuffle/index.html';
        var disqus_url = 'http://phpjs.org/functions/shuffle/index.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
